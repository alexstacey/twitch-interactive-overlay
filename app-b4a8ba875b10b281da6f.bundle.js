!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1540)}({100:function(e,t,n){var r=n(120);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},119:function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},120:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},141:function(e,t){e.exports=!1},142:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},143:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},144:function(e,t){e.exports={}},145:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},146:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},147:function(e,t,n){var r=n(600),o=n(307);e.exports=Object.keys||function(e){return r(e,o)}},148:function(e,t,n){var r=n(191),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},1540:function(e,t,n){e.exports=n(1580)},1541:function(e,t,n){for(var r=n(595),o=n(147),i=n(81),s=n(32),a=n(80),c=n(144),u=n(27),l=u("iterator"),f=u("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=o(p),d=0;d<m.length;d++){var g,y=m[d],v=p[y],b=s[y],_=b&&b.prototype;if(_&&(_[l]||a(_,l,h),_[f]||a(_,f,y),c[y]=h,v))for(g in r)_[g]||i(_,g,r[g],!0)}},1542:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},1543:function(e,t,n){e.exports=n(190)("native-function-to-string",Function.toString)},1544:function(e,t,n){"use strict";var r=n(305),o=n(143),i=n(192),s={};n(80)(s,n(27)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(s,{next:o(1,n)}),i(e,t+" Iterator")}},1545:function(e,t,n){var r=n(50),o=n(33),i=n(147);e.exports=n(44)?Object.defineProperties:function(e,t){o(e);for(var n,s=i(t),a=s.length,c=0;a>c;)r.f(e,n=s[c++],t[n]);return e}},1546:function(e,t,n){var r=n(98),o=n(148),i=n(1547);e.exports=function(e){return function(t,n,s){var a,c=r(t),u=o(c.length),l=i(s,u);if(e&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},1547:function(e,t,n){var r=n(191),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},1548:function(e,t,n){var r=n(99),o=n(193),i=n(306)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},1549:function(e,t,n){var r=n(51),o=n(1550)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},1550:function(e,t,n){var r=n(44),o=n(147),i=n(98),s=n(195).f;e.exports=function(e){return function(t){for(var n,a=i(t),c=o(a),u=c.length,l=0,f=[];u>l;)n=c[l++],r&&!s.call(a,n)||f.push(e?[n,a[n]]:a[n]);return f}}},1551:function(e,t,n){var r=n(142)("meta"),o=n(43),i=n(99),s=n(50).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(97)((function(){return c(Object.preventExtensions({}))})),l=function(e){s(e,r,{value:{i:"O"+ ++a,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return u&&f.NEED&&c(e)&&!i(e,r)&&l(e),e}}},1552:function(e,t,n){var r=n(147),o=n(604),i=n(195);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var s,a=n(e),c=i.f,u=0;a.length>u;)c.call(e,s=a[u++])&&t.push(s);return t}},1553:function(e,t,n){var r=n(98),o=n(606).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return s.slice()}}(e):o(r(e))}},1554:function(e,t,n){"use strict";var r=n(120),o=n(43),i=n(608),s=[].slice,a={},c=function(e,t,n){if(!(t in a)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";a[t]=Function("F,a","return new F("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=s.call(arguments,1),a=function(){var r=n.concat(s.call(arguments));return this instanceof a?c(t,r.length,r):i(t,r,e)};return o(t.prototype)&&(a.prototype=t.prototype),a}},1555:function(e,t,n){var r=n(43),o=n(33),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(100)(Function.call,n(607).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},1556:function(e,t,n){var r=n(51);r(r.P,"String",{repeat:n(1557)})},1557:function(e,t,n){"use strict";var r=n(191),o=n(146);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},1558:function(e,t,n){var r=n(100),o=n(598),i=n(193),s=n(148),a=n(1559);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,f=6==e,h=5==e||f,p=t||a;return function(t,a,m){for(var d,g,y=i(t),v=o(y),b=r(a,m,3),_=s(v.length),w=0,x=n?p(t,_):c?p(t,0):void 0;_>w;w++)if((h||w in v)&&(g=b(d=v[w],w,y),e))if(n)x[w]=g;else if(g)switch(e){case 3:return!0;case 5:return d;case 6:return w;case 2:x.push(d)}else if(l)return!1;return f?-1:u||l?l:x}}},1559:function(e,t,n){var r=n(1560);e.exports=function(e,t){return new(r(e))(t)}},1560:function(e,t,n){var r=n(43),o=n(605),i=n(27)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},1561:function(e,t,n){"use strict";var r=n(33),o=n(148),i=n(1562),s=n(610);n(611)("match",1,(function(e,t,n,a){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var c=r(e),u=String(this);if(!c.global)return s(c,u);var l=c.unicode;c.lastIndex=0;for(var f,h=[],p=0;null!==(f=s(c,u));){var m=String(f[0]);h[p]=m,""===m&&(c.lastIndex=i(u,o(c.lastIndex),l)),p++}return 0===p?null:h}]}))},1562:function(e,t,n){"use strict";var r=n(609)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},1563:function(e,t,n){"use strict";var r=n(612);n(51)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},1564:function(e,t,n){"use strict";var r=n(33),o=n(1565),i=n(610);n(611)("search",1,(function(e,t,n,s){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var a=r(e),c=String(this),u=a.lastIndex;o(u,0)||(a.lastIndex=0);var l=i(a,c);return o(a.lastIndex,u)||(a.lastIndex=u),null===l?-1:l.index}]}))},1565:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},1566:function(e,t,n){"use strict";var r=n(609)(!0);n(599)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},1567:function(e,t,n){"use strict";var r=n(100),o=n(51),i=n(193),s=n(613),a=n(614),c=n(148),u=n(1568),l=n(615);o(o.S+o.F*!n(616)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,f,h=i(e),p="function"==typeof this?this:Array,m=arguments.length,d=m>1?arguments[1]:void 0,g=void 0!==d,y=0,v=l(h);if(g&&(d=r(d,m>2?arguments[2]:void 0,2)),null==v||p==Array&&a(v))for(n=new p(t=c(h.length));t>y;y++)u(n,y,g?d(h[y],y):h[y]);else for(f=v.call(h),n=new p;!(o=f.next()).done;y++)u(n,y,g?s(f,d,[o.value,y],!0):o.value);return n.length=y,n}})},1568:function(e,t,n){"use strict";var r=n(50),o=n(143);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},1569:function(e,t,n){(function(e){!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return o(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var i=!1,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";t.exports={client:e("./lib/client"),Client:e("./lib/client")}},{"./lib/client":3}],2:[function(e,t,n){"use strict";var r=e("request"),o=e("./utils");t.exports=function(e,t){var n=null===o.get(e.url,null)?o.get(e.uri,null):o.get(e.url,null);if(o.isURL(n)||(n="https://api.twitch.tv/kraken"+("/"===n[0]?n:"/"+n)),o.isNode())r(o.merge({method:"GET",json:!0},e,{url:n}),t);else if(o.isExtension()){e=o.merge({url:n,method:"GET",headers:{}},e);var i=new XMLHttpRequest;for(var s in i.open(e.method,e.url,!0),e.headers)i.setRequestHeader(s,e.headers[s]);i.responseType="json",i.addEventListener("load",(function(e){4==i.readyState&&(200!=i.status?t(i.status,null,null):t(null,null,i.response))})),i.send()}else{var a="jsonp_callback_"+Math.round(1e5*Math.random());window[a]=function(e){delete window[a],document.body.removeChild(c),t(null,null,e)};var c=document.createElement("script");c.src=n+(n.includes("?")?"&":"?")+"callback="+a,document.body.appendChild(c)}}},{"./utils":10,request:11}],3:[function(t,n,r){(function(e){"use strict";var r=t("./api"),o=t("./commands"),i=t("./events").EventEmitter,s=t("./logger"),a=t("./parser"),c=t("./timer"),u=t("./extra-utils"),l=e.WebSocket||e.MozWebSocket||t("ws"),f=t("./utils"),h=function e(t){if(this instanceof e==0)return new e(t);this.setMaxListeners(0),this.opts=f.get(t,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=f.get(this.opts.options.clientId,null),this.maxReconnectAttempts=f.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=f.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=f.get(this.opts.connection.reconnect,!1),this.reconnectDecay=f.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=f.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=f.get(this.opts.connection.secure,!1),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null;var n="error";this.opts.options.debug&&(n="info"),this.log=this.opts.logger||s;try{s.setLevel(n)}catch(e){}this.opts.channels.forEach((function(e,t,n){n[t]=f.channel(e)})),i.call(this)};for(var p in f.inherits(h,i),h.prototype.api=r,o)h.prototype[p]=o[p];h.prototype.handleMessage=function(e){var t=this;if(!f.isNull(e)){this.emit("raw_message",JSON.parse(JSON.stringify(e)),e);var n=f.channel(f.get(e.params[0],null)),r=f.get(e.params[1],null),o=f.get(e.tags["msg-id"],null);if(e.tags=a.badges(a.emotes(e.tags)),e.tags)for(var i in e.tags)"emote-sets"!==i&&"ban-duration"!==i&&"bits"!==i&&(f.isBoolean(e.tags[i])?e.tags[i]=null:"1"===e.tags[i]?e.tags[i]=!0:"0"===e.tags[i]&&(e.tags[i]=!1));if(f.isNull(e.prefix))switch(e.command){case"PING":this.emit("ping"),f.isNull(this.ws)||2===this.ws.readyState||3===this.ws.readyState||this.ws.send("PONG");break;case"PONG":var s=new Date;this.currentLatency=(s.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break;default:this.log.warn("Could not parse message with no prefix:\n"+JSON.stringify(e,null,4))}else if("tmi.twitch.tv"===e.prefix)switch(e.command){case"002":case"003":case"004":case"375":case"376":case"CAP":break;case"001":this.username=e.params[0];break;case"372":this.log.info("Connected to server."),this.userstate["#tmijs"]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval((function(){f.isNull(t.ws)||2===t.ws.readyState||3===t.ws.readyState||t.ws.send("PING"),t.latency=new Date,t.pingTimeout=setTimeout((function(){f.isNull(t.ws)||(t.wasCloseCalled=!1,t.log.error("Ping timeout."),t.ws.close(),clearInterval(t.pingLoop),clearTimeout(t.pingTimeout))}),f.get(t.opts.connection.timeout,9999))}),6e4);var u=new c.queue(2e3),l=f.union(this.opts.channels,this.channels);this.channels=[];for(var h=0;h<l.length;h++){var p=this;u.add(function(e){f.isNull(p.ws)||2===p.ws.readyState||3===p.ws.readyState||p.ws.send("JOIN "+f.channel(l[e]))}.bind(this,h))}u.run();break;case"NOTICE":var m=[null],d=[n,o,r],g=[n,!0],y=[n,!1],v=[d,m],b=[d,[o]],_="["+n+"] "+r;switch(o){case"subs_on":this.log.info("["+n+"] This room is now in subscribers-only mode."),this.emits(["subscriber","subscribers","_promiseSubscribers"],[g,g,m]);break;case"subs_off":this.log.info("["+n+"] This room is no longer in subscribers-only mode."),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[y,y,m]);break;case"emote_only_on":this.log.info("["+n+"] This room is now in emote-only mode."),this.emits(["emoteonly","_promiseEmoteonly"],[g,m]);break;case"emote_only_off":this.log.info("["+n+"] This room is no longer in emote-only mode."),this.emits(["emoteonly","_promiseEmoteonlyoff"],[y,m]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info("["+n+"] This room is now in r9k mode."),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[g,g,m]);break;case"r9k_off":this.log.info("["+n+"] This room is no longer in r9k mode."),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[y,y,m]);break;case"room_mods":var w=r.split(": ")[1].toLowerCase().split(", ").filter((function(e){return e}));this.emits(["_promiseMods","mods"],[[null,w],[n,w]]);break;case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[n,[]]]);break;case"vips_success":r.endsWith(".")&&(r=r.slice(0,-1));var x=r.split(": ")[1].toLowerCase().split(", ").filter((function(e){return e}));this.emits(["_promiseVips","vips"],[[null,x],[n,x]]);break;case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[n,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(_),this.emits(["notice","_promiseBan"],b);break;case"ban_success":this.log.info(_),this.emits(["notice","_promiseBan"],v);break;case"usage_clear":this.log.info(_),this.emits(["notice","_promiseClear"],b);break;case"usage_mods":this.log.info(_),this.emits(["notice","_promiseMods"],[d,[o,[]]]);break;case"mod_success":this.log.info(_),this.emits(["notice","_promiseMod"],v);break;case"usage_vips":this.log.info(_),this.emits(["notice","_promiseVips"],[d,[o,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":this.log.info(_),this.emits(["notice","_promiseVip"],[d,[o,[]]]);break;case"vip_success":this.log.info(_),this.emits(["notice","_promiseVip"],v);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(_),this.emits(["notice","_promiseMod"],b);break;case"unmod_success":this.log.info(_),this.emits(["notice","_promiseUnmod"],v);break;case"unvip_success":this.log.info(_),this.emits(["notice","_promiseUnvip"],v);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(_),this.emits(["notice","_promiseUnmod"],b);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(_),this.emits(["notice","_promiseUnvip"],b);break;case"color_changed":this.log.info(_),this.emits(["notice","_promiseColor"],v);break;case"usage_color":case"turbo_only_color":this.log.info(_),this.emits(["notice","_promiseColor"],b);break;case"commercial_success":this.log.info(_),this.emits(["notice","_promiseCommercial"],v);break;case"usage_commercial":case"bad_commercial_error":this.log.info(_),this.emits(["notice","_promiseCommercial"],b);break;case"hosts_remaining":this.log.info(_);var k=isNaN(r[0])?0:parseInt(r[0]);this.emits(["notice","_promiseHost"],[d,[null,~~k]]);break;case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(_),this.emits(["notice","_promiseHost"],[d,[o,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(_),this.emits(["notice","_promiseR9kbeta"],b);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(_),this.emits(["notice","_promiseR9kbetaoff"],b);break;case"timeout_success":this.log.info(_),this.emits(["notice","_promiseTimeout"],v);break;case"delete_message_success":this.log.info("["+n+" "+r+"]"),this.emits(["notice","_promiseDeletemessage"],v);case"already_subs_off":case"usage_subs_off":this.log.info(_),this.emits(["notice","_promiseSubscribersoff"],b);break;case"already_subs_on":case"usage_subs_on":this.log.info(_),this.emits(["notice","_promiseSubscribers"],b);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(_),this.emits(["notice","_promiseEmoteonlyoff"],b);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(_),this.emits(["notice","_promiseEmoteonly"],b);break;case"usage_slow_on":this.log.info(_),this.emits(["notice","_promiseSlow"],b);break;case"usage_slow_off":this.log.info(_),this.emits(["notice","_promiseSlowoff"],b);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(_),this.emits(["notice","_promiseTimeout"],b);break;case"untimeout_success":case"unban_success":this.log.info(_),this.emits(["notice","_promiseUnban"],v);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(_),this.emits(["notice","_promiseUnban"],b);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(_),this.emits(["notice","_promiseDeletemessage"],b);break;case"usage_unhost":case"not_hosting":this.log.info(_),this.emits(["notice","_promiseUnhost"],b);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted_recipient":this.log.info(_),this.emits(["notice","_promiseWhisper"],b);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":this.log.info(_),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff"],b);break;case"unrecognized_cmd":this.log.info(_),this.emit("notice",n,o,r),"/w"===r.split(" ").splice(-1)[0]&&this.log.warn("You must be connected to a group server to send or receive whispers.");break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_rejected":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":this.log.info(_),this.emit("notice",n,o,r);break;case"host_on":case"host_off":break;default:r.includes("Login unsuccessful")||r.includes("Login authentication failed")||r.includes("Error logging in")||r.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=r,this.log.error(this.reason),this.ws.close()):r.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):this.log.warn("Could not parse NOTICE from tmi.twitch.tv:\n"+JSON.stringify(e,null,4))}break;case"USERNOTICE":var S=e.tags["display-name"]||e.tags.login,C=e.tags["msg-param-sub-plan"]||"",O=f.unescapeIRC(f.get(e.tags["msg-param-sub-plan-name"],""))||null,E=C.includes("Prime"),P=e.tags,T=~~(e.tags["msg-param-streak-months"]||0),R=e.tags["msg-param-recipient-display-name"]||e.tags["msg-param-recipient-user-name"],j=~~e.tags["msg-param-mass-gift-count"],D={prime:E,plan:C,planName:O};switch(P["message-type"]=o,o){case"resub":this.emits(["resub","subanniversary"],[[n,S,T,r,P,D]]);break;case"sub":this.emit("subscription",n,S,D,r,P);break;case"subgift":this.emit("subgift",n,S,T,R,D,P);break;case"anonsubgift":this.emit("anonsubgift",n,T,R,D,P);break;case"submysterygift":this.emit("submysterygift",n,S,j,D,P);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",n,j,D,P);break;case"giftpaidupgrade":var M=e.tags["msg-param-sender-name"]||e.tags["msg-param-sender-login"];this.emit("giftpaidupgrade",n,S,M,P);break;case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",n,S,P);break;case"raid":S=e.tags["msg-param-displayName"]||e.tags["msg-param-login"];var A=e.tags["msg-param-viewerCount"];this.emit("raided",n,S,A)}break;case"HOSTTARGET":var L=r.split(" ");A=~~L[1]||0;"-"===L[0]?(this.log.info("["+n+"] Exited host mode."),this.emits(["unhost","_promiseUnhost"],[[n,A],[null]])):(this.log.info("["+n+"] Now hosting "+L[0]+" for "+A+" viewer(s)."),this.emit("hosting",n,L[0],A));break;case"CLEARCHAT":if(e.params.length>1){var N=f.get(e.tags["ban-duration"],null);f.isNull(N)?(this.log.info("["+n+"] "+r+" has been banned."),this.emit("ban",n,r,null,e.tags)):(this.log.info("["+n+"] "+r+" has been timed out for "+N+" seconds."),this.emit("timeout",n,r,null,~~N,e.tags))}else this.log.info("["+n+"] Chat was cleared by a moderator."),this.emits(["clearchat","_promiseClear"],[[n],[null]]);break;case"CLEARMSG":if(e.params.length>1){S=e.tags.login;var I=r;(P=e.tags)["message-type"]="messagedeleted",this.log.info("["+n+"] "+S+"'s message has been deleted."),this.emit("messagedeleted",n,S,I,P)}break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info("Disconnecting and reconnecting in "+Math.round(this.reconnectTimer/1e3)+" seconds.."),this.disconnect(),setTimeout((function(){t.connect()}),this.reconnectTimer);break;case"SERVERCHANGE":break;case"USERSTATE":e.tags.username=this.username,"mod"===e.tags["user-type"]&&(this.moderators[this.lastJoined]||(this.moderators[this.lastJoined]=[]),this.moderators[this.lastJoined].includes(this.username)||this.moderators[this.lastJoined].push(this.username)),f.isJustinfan(this.getUsername())||this.userstate[n]||(this.userstate[n]=e.tags,this.lastJoined=n,this.channels.push(n),this.log.info("Joined "+n),this.emit("join",n,f.username(this.getUsername()),!0)),e.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(e.tags["emote-sets"]),this.userstate[n]=e.tags;break;case"GLOBALUSERSTATE":this.globaluserstate=e.tags,void 0!==e.tags["emote-sets"]&&this._updateEmoteset(e.tags["emote-sets"]);break;case"ROOMSTATE":if(f.channel(this.lastJoined)===f.channel(e.params[0])&&this.emit("_promiseJoin",null),e.tags.channel=f.channel(e.params[0]),this.emit("roomstate",f.channel(e.params[0]),e.tags),!e.tags.hasOwnProperty("subs-only")){if(e.tags.hasOwnProperty("slow"))if("boolean"!=typeof e.tags.slow||e.tags.slow){var G=~~e.tags.slow;this.log.info("["+n+"] This room is now in slow mode."),this.emits(["slow","slowmode","_promiseSlow"],[[n,!0,G],[n,!0,G],[null]])}else this.log.info("["+n+"] This room is no longer in slow mode."),this.emits(["slow","slowmode","_promiseSlowoff"],[[n,!1,0],[n,!1,0],[null]]);if(e.tags.hasOwnProperty("followers-only"))if("-1"===e.tags["followers-only"])this.log.info("["+n+"] This room is no longer in followers-only mode."),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[[n,!1,0],[n,!1,0],[null]]);else{G=~~e.tags["followers-only"];this.log.info("["+n+"] This room is now in follower-only mode."),this.emits(["followersonly","followersmode","_promiseFollowers"],[[n,!0,G],[n,!0,G],[null]])}}break;default:this.log.warn("Could not parse message from tmi.twitch.tv:\n"+JSON.stringify(e,null,4))}else if("jtv"===e.prefix)switch(e.command){case"MODE":"+o"===r?(this.moderators[n]||(this.moderators[n]=[]),this.moderators[n].includes(e.params[2])||this.moderators[n].push(e.params[2]),this.emit("mod",n,e.params[2])):"-o"===r&&(this.moderators[n]||(this.moderators[n]=[]),this.moderators[n].filter((function(t){return t!=e.params[2]})),this.emit("unmod",n,e.params[2]));break;default:this.log.warn("Could not parse message from jtv:\n"+JSON.stringify(e,null,4))}else switch(e.command){case"353":this.emit("names",e.params[2],e.params[3].split(" "));break;case"366":break;case"JOIN":var B=e.prefix.split("!")[0];f.isJustinfan(this.getUsername())&&this.username===B&&(this.lastJoined=n,this.channels.push(n),this.log.info("Joined "+n),this.emit("join",n,B,!0)),this.username!==B&&this.emit("join",n,B,!1);break;case"PART":var F,W=!1;B=e.prefix.split("!")[0];if(this.username===B)W=!0,this.userstate[n]&&delete this.userstate[n],-1!==(F=this.channels.indexOf(n))&&this.channels.splice(F,1),-1!==(F=this.opts.channels.indexOf(n))&&this.opts.channels.splice(F,1),this.log.info("Left "+n),this.emit("_promisePart",null);this.emit("part",n,B,W);break;case"WHISPER":B=e.prefix.split("!")[0];this.log.info("[WHISPER] <"+B+">: "+r),e.tags.hasOwnProperty("username")||(e.tags.username=B),e.tags["message-type"]="whisper";var U=f.channel(e.tags.username);this.emits(["whisper","message"],[[U,e.tags,r,!1]]);break;case"PRIVMSG":if(e.tags.username=e.prefix.split("!")[0],"jtv"===e.tags.username){var H=f.username(r.split(" ")[0]),z=r.includes("auto");if(r.includes("hosting you for")){var J=f.extractNumber(r);this.emit("hosted",n,H,J,z)}else r.includes("hosting you")&&this.emit("hosted",n,H,0,z)}else{var V=f.actionMessage(r);V?(e.tags["message-type"]="action",this.log.info("["+n+"] *<"+e.tags.username+">: "+V[1]),this.emits(["action","message"],[[n,e.tags,V[1],!1]])):e.tags.hasOwnProperty("bits")?this.emit("cheer",n,e.tags,r):(e.tags["message-type"]="chat",this.log.info("["+n+"] <"+e.tags.username+">: "+r),this.emits(["chat","message"],[[n,e.tags,r,!1]]))}break;default:this.log.warn("Could not parse message:\n"+JSON.stringify(e,null,4))}}},h.prototype.connect=function(){var e=this;return new Promise((function(t,n){e.server=f.get(e.opts.connection.server,"irc-ws.chat.twitch.tv"),e.port=f.get(e.opts.connection.port,80),e.secure&&(e.port=443),443===e.port&&(e.secure=!0),e.reconnectTimer=e.reconnectTimer*e.reconnectDecay,e.reconnectTimer>=e.maxReconnectInterval&&(e.reconnectTimer=e.maxReconnectInterval),e._openConnection(),e.once("_promiseConnect",(function(r){r?n(r):t([e.server,~~e.port])}))}))},h.prototype._openConnection=function(){this.ws=new l((this.secure?"wss":"ws")+"://"+this.server+":"+this.port+"/","irc"),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},h.prototype._onOpen=function(){f.isNull(this.ws)||1!==this.ws.readyState||(this.log.info("Connecting to "+this.server+" on port "+this.port+".."),this.emit("connecting",this.server,~~this.port),this.username=f.get(this.opts.identity.username,f.justinfan()),this.password=f.password(f.get(this.opts.identity.password,"SCHMOOPIIE")),this.log.info("Sending authentication to server.."),this.emit("logon"),this.ws.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership"),this.ws.send("PASS "+this.password),this.ws.send("NICK "+this.username),this.ws.send("USER "+this.username+" 8 * :"+this.username))},h.prototype._onMessage=function(e){var t=this;e.data.split("\r\n").forEach((function(e){f.isNull(e)||t.handleMessage(a.msg(e))}))},h.prototype._onError=function(){var e=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),this.reason=f.isNull(this.ws)?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error("Reconnecting in "+Math.round(this.reconnectTimer/1e3)+" seconds.."),this.emit("reconnect"),setTimeout((function(){e.reconnecting=!1,e.connect()}),this.reconnectTimer)),this.ws=null},h.prototype._onClose=function(){var e=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error("Could not connect to server. Reconnecting in "+Math.round(this.reconnectTimer/1e3)+" seconds.."),this.emit("reconnect"),setTimeout((function(){e.reconnecting=!1,e.connect()}),this.reconnectTimer))),this.ws=null},h.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},h.prototype._sendCommand=function(e,t,n,r){var o=this;return new Promise((function(i,s){if(f.promiseDelay(e).then((function(){s("No response from Twitch.")})),f.isNull(o.ws)||2===o.ws.readyState||3===o.ws.readyState)s("Not connected to server.");else{if(f.isNull(t))o.log.info("Executing command: "+n),o.ws.send(n);else{var a=f.channel(t);o.log.info("["+a+"] Executing command: "+n),o.ws.send("PRIVMSG "+a+" :"+n)}r(i,s)}}))},h.prototype._sendMessage=function(e,t,n,r){var o=this;return new Promise((function(i,s){if(f.isNull(o.ws)||2===o.ws.readyState||3===o.ws.readyState||f.isJustinfan(o.getUsername()))s("Not connected to server.");else{var c=f.channel(t);if(o.userstate[c]||(o.userstate[c]={}),n.length>=500){var u=f.splitLine(n,500);n=u[0],setTimeout((function(){o._sendMessage(e,t,u[1],(function(){}))}),350)}o.ws.send("PRIVMSG "+c+" :"+n);var l={};Object.keys(o.emotesets).forEach((function(e){o.emotesets[e].forEach((function(e){return f.isRegex(e.code)?a.emoteRegex(n,e.code,e.id,l):void a.emoteString(n,e.code,e.id,l)}))}));var h=f.merge(o.userstate[c],a.emotes({emotes:a.transformEmotes(l)||null})),p=f.actionMessage(n);p?(h["message-type"]="action",o.log.info("["+c+"] *<"+o.getUsername()+">: "+p[1]),o.emits(["action","message"],[[c,h,p[1],!0]])):(h["message-type"]="chat",o.log.info("["+c+"] <"+o.getUsername()+">: "+n),o.emits(["chat","message"],[[c,h,n,!0]])),r(i,s)}}))},h.prototype._updateEmoteset=function(e){var t=this;this.emotes=e,this.api({url:"/chat/emoticon_images?emotesets="+e,headers:{Authorization:"OAuth "+f.password(f.get(this.opts.identity.password,"")).replace("oauth:",""),"Client-ID":this.clientId}},(function(n,r,o){return n?void setTimeout((function(){t._updateEmoteset(e)}),6e4):(t.emotesets=o.emoticon_sets||{},t.emit("emotesets",e,t.emotesets))}))},h.prototype.getUsername=function(){return this.username},h.prototype.getOptions=function(){return this.opts},h.prototype.getChannels=function(){return this.channels},h.prototype.isMod=function(e,t){var n=f.channel(e);return this.moderators[n]||(this.moderators[n]=[]),this.moderators[n].includes(f.username(t))},h.prototype.readyState=function(){return f.isNull(this.ws)?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},h.prototype.disconnect=function(){var e=this;return new Promise((function(t,n){f.isNull(e.ws)||3===e.ws.readyState?(e.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),n("Cannot disconnect from server. Socket is not opened or connection is already closing.")):(e.wasCloseCalled=!0,e.log.info("Disconnecting from server.."),e.ws.close(),e.once("_promiseDisconnect",(function(){t([e.server,~~e.port])})))}))},h.prototype.utils=u,void 0!==n&&n.exports&&(n.exports=h),"undefined"!=typeof window&&(window.tmi={},window.tmi.client=h,window.tmi.Client=h)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api":2,"./commands":4,"./events":5,"./extra-utils":6,"./logger":7,"./parser":8,"./timer":9,"./utils":10,ws:11}],4:[function(e,t,n){"use strict";function r(e,t){var n=this;return e=l.channel(e),t=l.get(t,30),this._sendCommand(this._getPromiseDelay(),e,"/followers "+t,(function(r,o){n.once("_promiseFollowers",(function(n){n?o(n):r([e,~~t])}))}))}function o(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/followersoff",(function(n,r){t.once("_promiseFollowersoff",(function(t){t?r(t):n([e])}))}))}function i(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),null,"PART "+e,(function(n,r){t.once("_promisePart",(function(t){t?r(t):n([e])}))}))}function s(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbeta",(function(n,r){t.once("_promiseR9kbeta",(function(t){t?r(t):n([e])}))}))}function a(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/r9kbetaoff",(function(n,r){t.once("_promiseR9kbetaoff",(function(t){t?r(t):n([e])}))}))}function c(e,t){var n=this;return e=l.channel(e),t=l.get(t,300),this._sendCommand(this._getPromiseDelay(),e,"/slow "+t,(function(r,o){n.once("_promiseSlow",(function(n){n?o(n):r([e,~~t])}))}))}function u(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/slowoff",(function(n,r){t.once("_promiseSlowoff",(function(t){t?r(t):n([e])}))}))}var l=e("./utils");t.exports={action:function(e,t){return e=l.channel(e),t="ACTION "+t+"",this._sendMessage(this._getPromiseDelay(),e,t,(function(n,r){n([e,t])}))},ban:function(e,t,n){var r=this;return e=l.channel(e),t=l.username(t),n=l.get(n,""),this._sendCommand(this._getPromiseDelay(),e,"/ban "+t+" "+n,(function(o,i){r.once("_promiseBan",(function(r){r?i(r):o([e,t,n])}))}))},clear:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/clear",(function(n,r){t.once("_promiseClear",(function(t){t?r(t):n([e])}))}))},color:function(e,t){var n=this;return t=l.get(t,e),this._sendCommand(this._getPromiseDelay(),"#tmijs","/color "+t,(function(e,r){n.once("_promiseColor",(function(n){n?r(n):e([t])}))}))},commercial:function(e,t){var n=this;return e=l.channel(e),t=l.get(t,30),this._sendCommand(this._getPromiseDelay(),e,"/commercial "+t,(function(r,o){n.once("_promiseCommercial",(function(n){n?o(n):r([e,~~t])}))}))},deletemessage:function(e,t){var n=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/delete "+t,(function(t,r){n.once("_promiseDeletemessage",(function(n){n?r(n):t([e])}))}))},emoteonly:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/emoteonly",(function(n,r){t.once("_promiseEmoteonly",(function(t){t?r(t):n([e])}))}))},emoteonlyoff:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/emoteonlyoff",(function(n,r){t.once("_promiseEmoteonlyoff",(function(t){t?r(t):n([e])}))}))},followersonly:r,followersmode:r,followersonlyoff:o,followersmodeoff:o,host:function(e,t){var n=this;return e=l.channel(e),t=l.username(t),this._sendCommand(2e3,e,"/host "+t,(function(r,o){n.once("_promiseHost",(function(n,i){n?o(n):r([e,t,~~i])}))}))},join:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),null,"JOIN "+e,(function(n,r){t.once("_promiseJoin",(function(t){t?r(t):n([e])}))}))},mod:function(e,t){var n=this;return e=l.channel(e),t=l.username(t),this._sendCommand(this._getPromiseDelay(),e,"/mod "+t,(function(r,o){n.once("_promiseMod",(function(n){n?o(n):r([e,t])}))}))},mods:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/mods",(function(n,r){t.once("_promiseMods",(function(o,i){o?r(o):(i.forEach((function(n){t.moderators[e]||(t.moderators[e]=[]),t.moderators[e].includes(n)||t.moderators[e].push(n)})),n(i))}))}))},part:i,leave:i,ping:function(){var e=this;return this._sendCommand(this._getPromiseDelay(),null,"PING",(function(t,n){e.latency=new Date,e.pingTimeout=setTimeout((function(){null!==e.ws&&(e.wasCloseCalled=!1,e.log.error("Ping timeout."),e.ws.close(),clearInterval(e.pingLoop),clearTimeout(e.pingTimeout))}),l.get(e.opts.connection.timeout,9999)),e.once("_promisePing",(function(e){t([parseFloat(e)])}))}))},r9kbeta:s,r9kmode:s,r9kbetaoff:a,r9kmodeoff:a,raw:function(e){return this._sendCommand(this._getPromiseDelay(),null,e,(function(t,n){t([e])}))},say:function(e,t){return e=l.channel(e),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?"me "===t.substr(1,3)?this.action(e,t.substr(4)):this._sendCommand(this._getPromiseDelay(),e,t,(function(n,r){n([e,t])})):this._sendMessage(this._getPromiseDelay(),e,t,(function(n,r){n([e,t])}))},slow:c,slowmode:c,slowoff:u,slowmodeoff:u,subscribers:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/subscribers",(function(n,r){t.once("_promiseSubscribers",(function(t){t?r(t):n([e])}))}))},subscribersoff:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/subscribersoff",(function(n,r){t.once("_promiseSubscribersoff",(function(t){t?r(t):n([e])}))}))},timeout:function(e,t,n,r){var o=this;return e=l.channel(e),t=l.username(t),l.isNull(n)||l.isInteger(n)||(r=n,n=300),n=l.get(n,300),r=l.get(r,""),this._sendCommand(this._getPromiseDelay(),e,"/timeout "+t+" "+n+" "+r,(function(i,s){o.once("_promiseTimeout",(function(o){o?s(o):i([e,t,~~n,r])}))}))},unban:function(e,t){var n=this;return e=l.channel(e),t=l.username(t),this._sendCommand(this._getPromiseDelay(),e,"/unban "+t,(function(r,o){n.once("_promiseUnban",(function(n){n?o(n):r([e,t])}))}))},unhost:function(e){var t=this;return e=l.channel(e),this._sendCommand(2e3,e,"/unhost",(function(n,r){t.once("_promiseUnhost",(function(t){t?r(t):n([e])}))}))},unmod:function(e,t){var n=this;return e=l.channel(e),t=l.username(t),this._sendCommand(this._getPromiseDelay(),e,"/unmod "+t,(function(r,o){n.once("_promiseUnmod",(function(n){n?o(n):r([e,t])}))}))},unvip:function(e,t){var n=this;return e=l.channel(e),t=l.username(t),this._sendCommand(this._getPromiseDelay(),e,"/unvip "+t,(function(r,o){n.once("_promiseUnvip",(function(n){n?o(n):r([e,t])}))}))},vip:function(e,t){var n=this;return e=l.channel(e),t=l.username(t),this._sendCommand(this._getPromiseDelay(),e,"/vip "+t,(function(r,o){n.once("_promiseVip",(function(n){n?o(n):r([e,t])}))}))},vips:function(e){var t=this;return e=l.channel(e),this._sendCommand(this._getPromiseDelay(),e,"/vips",(function(e,n){t.once("_promiseVips",(function(t,r){t?n(t):e(r)}))}))},whisper:function(e,t){var n=this;return(e=l.username(e))===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(this._getPromiseDelay(),"#tmijs","/w "+e+" "+t,(function(r,o){var i=l.channel(e),s=l.merge({"message-type":"whisper","message-id":null,"thread-id":null,username:n.getUsername()},n.globaluserstate);n.emits(["whisper","message"],[[i,s,t,!0],[i,s,t,!0]]),r([e,t])}))}}},{"./utils":10}],5:[function(e,t,n){"use strict";function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"object"===(void 0===e?"undefined":a(e))&&null!==e}function s(e){return void 0===e}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emits=function(e,t){for(var n=0;n<e.length;n++){var r=n<t.length?t[n]:t[t.length-1];this.emit.apply(this,[e[n]].concat(r))}},r.prototype.emit=function(e){var t,n,r,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(s(n=this._events[e]))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(i(n))for(a=Array.prototype.slice.call(arguments,1),r=(u=n.slice()).length,c=0;r>c;c++)u[c].apply(this,a);return!0},r.prototype.addListener=function(e,t){var n;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&((n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){"_"!==e.charAt(0)||isNaN(e.substr(e.length-1))||(e=e.substring(0,e.length-1)),this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var r=!1;if(this._events.hasOwnProperty(e)&&"_"===e.charAt(0)){var i=1,s=e;for(var a in this._events)this._events.hasOwnProperty(a)&&a.startsWith(s)&&i++;e+=i}return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,r=-1,n===t||o(n.listener)&&n.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&"_"===e.charAt(0)){var c=e;for(var u in this._events)this._events.hasOwnProperty(u)&&u.startsWith(c)&&(isNaN(parseInt(u.substr(u.length-1)))||(this._events[e+parseInt(u.substr(u.length-1)-1)]=this._events[u],delete this._events[u]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(i(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],6:[function(e,t,n){"use strict";var r=e("./utils");t.exports={levenshtein:function(e,t,n){if((n=r.get(n,!1))||(e=e.toLowerCase(),t=t.toLowerCase()),e==t)return 0;var o=e.length,i=t.length;if(0===o)return 1*i;if(0===i)return 1*o;var s=!1;try{s=!"0"[0]}catch(e){s=!0}s&&(e=e.split(""),t=t.split(""));var a,c,u,l,f,h,p=new Array(i+1),m=new Array(i+1);for(c=0;i>=c;c++)p[c]=1*c;for(a=0;o>a;a++){for(m[0]=p[0]+1,c=0;i>c;c++)(u=p[c]+(e[a]==t[c]?0:1))>(l=p[c+1]+1)&&(u=l),u>(f=m[c]+1)&&(u=f),m[c+1]=u;h=p,p=m,m=h}return p[i]},raffle:{init:function(e){this.raffleChannels||(this.raffleChannels={}),this.raffleChannels[r.channel(e)]||(this.raffleChannels[r.channel(e)]=[])},enter:function(e,t){this.init(e),this.raffleChannels[r.channel(e)].push(t.toLowerCase())},leave:function(e,t){this.init(e);var n=this.raffleChannels[r.channel(e)].indexOf(r.username(t));return n>=0&&(this.raffleChannels[r.channel(e)].splice(n,1),!0)},pick:function(e){this.init(e);var t=this.raffleChannels[r.channel(e)].length;return t>=1?this.raffleChannels[r.channel(e)][Math.floor(Math.random()*t)]:null},reset:function(e){this.init(e),this.raffleChannels[r.channel(e)]=[]},count:function(e){return this.init(e),this.raffleChannels[r.channel(e)]?this.raffleChannels[r.channel(e)].length:0},isParticipating:function(e,t){return this.init(e),this.raffleChannels[r.channel(e)].includes(r.username(t))}},symbols:function(e){for(var t=0,n=0;n<e.length;n++){var r=e.substring(n,n+1).charCodeAt(0);(30>=r||r>=127||65533===r)&&t++}return Math.ceil(t/e.length*100)/100},uppercase:function(e){var t=e.length,n=e.match(/[A-Z]/g);return r.isNull(n)?0:n.length/t}}},{"./utils":10}],7:[function(e,t,n){"use strict";function r(e){return function(t){s[e]>=s[i]&&console.log("["+o.formatDate(new Date)+"] "+e+": "+t)}}var o=e("./utils"),i="info",s={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};t.exports={setLevel:function(e){i=e},trace:r("trace"),debug:r("debug"),info:r("info"),warn:r("warn"),error:r("error"),fatal:r("fatal")}},{"./utils":10}],8:[function(e,t,n){"use strict";var r=e("./utils");t.exports={badges:function(e){if(r.isString(e.badges)){for(var t={},n=e.badges.split(","),o=0;o<n.length;o++){var i=n[o].split("/");if(!i[1])return;t[i[0]]=i[1]}e["badges-raw"]=e.badges,e.badges=t}return r.isBoolean(e.badges)&&(e["badges-raw"]=null),e},emotes:function(e){if(r.isString(e.emotes)){for(var t=e.emotes.split("/"),n={},o=0;o<t.length;o++){var i=t[o].split(":");if(!i[1])return;n[i[0]]=i[1].split(",")}e["emotes-raw"]=e.emotes,e.emotes=n}return r.isBoolean(e.emotes)&&(e["emotes-raw"]=null),e},emoteRegex:function(e,t,n,o){for(var i,s=/\S+/g,a=new RegExp("(\\b|^|s)"+r.unescapeHtml(t)+"(\\b|$|s)");null!==(i=s.exec(e));)a.test(i[0])&&(o[n]=o[n]||[],o[n].push([i.index,s.lastIndex-1]))},emoteString:function(e,t,n,o){for(var i,s=/\S+/g;null!==(i=s.exec(e));)i[0]===r.unescapeHtml(t)&&(o[n]=o[n]||[],o[n].push([i.index,s.lastIndex-1]))},transformEmotes:function(e){var t="";return Object.keys(e).forEach((function(n){t=t+n+":",e[n].forEach((function(e){t=t+e.join("-")+","})),t=t.slice(0,-1)+"/"})),t.slice(0,-1)},msg:function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,r=0;if(64===e.charCodeAt(0)){if(-1===(r=e.indexOf(" ")))return null;for(var o=e.slice(1,r).split(";"),i=0;i<o.length;i++){var s=o[i],a=s.split("=");t.tags[a[0]]=s.substring(s.indexOf("=")+1)||!0}n=r+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(r=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,r),n=r+1;32===e.charCodeAt(n);)n++}if(-1===(r=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,r),n=r+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(r=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===r){if(-1===r){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,r)),n=r+1;32===e.charCodeAt(n);)n++}return t}}},{"./utils":10}],9:[function(e,t,n){"use strict";function r(e){this.queue=[],this.index=0,this.defaultDelay=e||3e3}r.prototype.add=function(e,t){this.queue.push({fn:e,delay:t})},r.prototype.run=function(e){(e||0===e)&&(this.index=e),this.next()},r.prototype.next=function(){var e=this,t=this.index++,n=this.queue[t],r=this.queue[this.index];n&&(n.fn(),r&&setTimeout((function(){e.next()}),r.delay||this.defaultDelay))},r.prototype.reset=function(){this.index=0},r.prototype.clear=function(){this.index=0,this.queue=[]},n.queue=r},{}],10:[function(e,t,n){(function(e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=/^\u0001ACTION ([^\u0001]+)\u0001$/,o=/^(justinfan)(\d+$)/,i=/\\([sn:r\\])/g,s={s:" ",n:"",":":";",r:""},a=t.exports={get:function(e,t){return void 0===e?t:e},isBoolean:function(e){return"boolean"==typeof e},isFinite:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isFinite(e)&&!isNaN(parseFloat(e))})),isInteger:function(e){return!isNaN(a.toNumber(e,0))},isJustinfan:function(e){return o.test(e)},isNull:function(e){return null===e},isRegex:function(e){return/[\|\\\^\$\*\+\?\:\#]/.test(e)},isString:function(e){return"string"==typeof e},isURL:function(e){return RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i").test(e)},justinfan:function(){return"justinfan"+Math.floor(8e4*Math.random()+1e3)},password:function(e){return["SCHMOOPIIE","",null].includes(e)?"SCHMOOPIIE":"oauth:"+e.toLowerCase().replace("oauth:","")},promiseDelay:function(e){return new Promise((function(t){setTimeout(t,e)}))},replaceAll:function(e,t){if(null==e)return null;for(var n in t)e=e.replace(new RegExp(n,"g"),t[n]);return e},unescapeHtml:function(e){return e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'")},unescapeIRC:function(e){return e&&e.includes("\\")?e.replace(i,(function(e,t){return t in s?s[t]:t})):e},actionMessage:function(e){return e.match(r)},addWord:function(e,t){return e.length?e+" "+t:e+t},channel:function(e){var t=(e||"").toLowerCase();return"#"===t[0]?t:"#"+t},extractNumber:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)if(a.isInteger(t[n]))return~~t[n];return 0},formatDate:function(e){var t=e.getHours(),n=e.getMinutes();return(t=(10>t?"0":"")+t)+":"+(n=(10>n?"0":"")+n)},inherits:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},isNode:function(){try{return t.exports="object"===(void 0===e?"undefined":n(e))&&"[object process]"===Object.prototype.toString.call(e)}catch(e){return!1}},isExtension:function(){try{return!!(window.chrome&&chrome.runtime&&chrome.runtime.id)}catch(e){return!1}},merge:Object.assign,splitLine:function(e,t){var n=e.substring(0,t).lastIndexOf(" ");return-1===n&&(n=t-1),[e.substring(0,n),e.substring(n+1)]},toNumber:function(e,t){if(null===e)return 0;var n=Math.pow(10,a.isFinite(t)?t:0);return Math.round(e*n)/n},union:function(e,t){for(var n={},r=[],o=0;o<e.length;o++){n[i=e[o]]||(n[i]=!0,r.push(i))}for(o=0;o<t.length;o++){var i;n[i=t[o]]||(n[i]=!0,r.push(i))}return r},username:function(e){var t=(e||"").toLowerCase();return"#"===t[0]?t.slice(1):t}}}).call(this,e("_process"))},{_process:12}],11:[function(e,t,n){},{}],12:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function s(){d&&p&&(d=!1,p.length?m=p.concat(m):g=-1,m.length&&a())}function a(){if(!d){var e=i(s);d=!0;for(var t=m.length;t;){for(p=m,m=[];++g<t;)p&&p[g].run();g=-1,t=m.length}p=null,d=!1,function(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,f,h=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var p,m=[],d=!1,g=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||d||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}]},{},[1])}).call(this,n(198))},1570:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},1571:function(e,t,n){var r=n(100),o=n(613),i=n(614),s=n(33),a=n(148),c=n(615),u={},l={};(t=e.exports=function(e,t,n,f,h){var p,m,d,g,y=h?function(){return e}:c(e),v=r(n,f,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(p=a(e.length);p>b;b++)if((g=t?v(s(m=e[b])[0],m[1]):v(e[b]))===u||g===l)return g}else for(d=y.call(e);!(m=d.next()).done;)if((g=o(d,v,m.value,t))===u||g===l)return g}).BREAK=u,t.RETURN=l},1572:function(e,t,n){var r=n(33),o=n(120),i=n(27)("species");e.exports=function(e,t){var n,s=r(e).constructor;return void 0===s||null==(n=r(s)[i])?t:o(n)}},1573:function(e,t,n){var r=n(32),o=n(618).set,i=r.MutationObserver||r.WebKitMutationObserver,s=r.process,a=r.Promise,c="process"==n(145)(s);e.exports=function(){var e,t,n,u=function(){var r,o;for(c&&(r=s.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){s.nextTick(u)};else if(!i||r.navigator&&r.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(u)}}else n=function(){o.call(r,u)};else{var f=!0,h=document.createTextNode("");new i(u).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},1574:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},1575:function(e,t,n){var r=n(32).navigator;e.exports=r&&r.userAgent||""},1576:function(e,t,n){var r=n(33),o=n(43),i=n(619);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},1577:function(e,t,n){var r=n(81);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},1578:function(e,t,n){"use strict";var r=n(32),o=n(50),i=n(44),s=n(27)("species");e.exports=function(e){var t=r[e];i&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},1579:function(e,t,n){var r=n(50).f,o=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in o||n(44)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},1580:function(e,t,n){"use strict";n.r(t),n.d(t,"boot",(function(){return Ye}));var r={};n.r(r),n.d(r,"SplashScreen",(function(){return v})),n.d(r,"Game",(function(){return je}));var o={};n.r(o),n.d(o,"debug",(function(){return Le})),n.d(o,"width",(function(){return Ne})),n.d(o,"height",(function(){return Ie})),n.d(o,"zoom",(function(){return Ge})),n.d(o,"resolution",(function(){return Be})),n.d(o,"type",(function(){return Fe})),n.d(o,"pixelArt",(function(){return We})),n.d(o,"roundPixels",(function(){return Ue})),n.d(o,"transparent",(function(){return He})),n.d(o,"canvasStyle",(function(){return ze})),n.d(o,"physics",(function(){return Je})),n.d(o,"loader",(function(){return Ve})),n.d(o,"plugins",(function(){return Xe})),n.d(o,"title",(function(){return Ae.a})),n.d(o,"version",(function(){return Ae.c})),n.d(o,"url",(function(){return Ae.b})),n.d(o,"scene",(function(){return qe}));n(1541),n(595),n(45),n(1549),n(82),n(83),n(84),n(85),n(86);n(1556);var i=[{key:"santa_die",start:0,end:14,prefix:"santa/die/Dying_",repeat:0},{key:"santa_jump",start:0,end:5,prefix:"santa/jump/Jump Start_",repeat:0},{key:"santa_run",start:0,end:14,prefix:"santa/run/Running_",repeat:-1},{key:"santa_standing",start:0,end:11,prefix:"santa/standing/Idle Blinking_",repeat:-1},{key:"santa_walk",start:0,end:17,prefix:"santa/walk/Walking_",repeat:-1},{key:"snowman_die",start:0,end:14,prefix:"snowman/die/Dying_",repeat:0},{key:"snowman_jump",start:0,end:5,prefix:"snowman/jump/Jump Start_",repeat:0},{key:"snowman_run",start:0,end:11,prefix:"snowman/run/Walking_",repeat:-1,rate:10},{key:"snowman_standing",start:0,end:11,prefix:"snowman/standing/Idle Blinking_",repeat:-1},{key:"snowman_walk",start:0,end:11,prefix:"snowman/walk/Walking_",repeat:-1}];n(196),n(1561),n(1564);function s(e,t){var n=e.command.toUpperCase(),r=t.command.toUpperCase();return n<r?-1:n>r?1:0}function a(e){var t="https://api.streamelements.com/kappa/v2/speech?voice=Brian&text="+encodeURIComponent(e);new Audio(t).play()}function c(e){return e.broadcaster||e.mod||e.subscriber||e.vip}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=c(t);return!!t.broadcaster||!e.private&&(r||e.coolDown<=n||0===n)}var l=[{command:"bomboclot",file:"audio/bomboclot.mp3",config:{volume:1}},{command:"junglist",file:"audio/junglist.mp3",config:{volume:1}},{command:"moremusic",file:"audio/more_music.mp3",config:{volume:1}},{command:"order",file:"audio/order1.mp3",config:{volume:1}},{command:"order2",file:"audio/order2.mp3",config:{volume:1}},{command:"pullup",file:"audio/pull_up.mp3",config:{volume:1}},{command:"raygun",file:"audio/ray_gun.mp3",config:{volume:1}},{command:"washhands",file:"audio/wash_your_hands.mp3",config:{volume:1}},{command:"explode",file:"audio/explode.mp3",config:{volume:.1}},{command:"airhorn",file:"audio/airhorn.mp3",config:{volume:.1}}];function f(e,t,n){var r=l.find((function(e){return Array.isArray(e.command)?e.command.some((function(e){return e===t})):e.command===t}));r&&u(r,n,0)&&e.sound.play(t,r.config)}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,Phaser.Scene);var t,n,r,o,s=(t=a,function(){var e,n=g(t);if(d()){var r=g(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return m(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,{key:"SplashScreen",pack:{files:[{key:"splash-screen",type:"image"},{key:"progress-bar",type:"image"}]}})}return n=a,(r=[{key:"preload",value:function(){var e;this.showCover(),this.showProgressBar(),this.load.image("logo"),this.load.image("character_active","not-lurk.png"),this.load.image("character_inactive","lurk.png"),this.load.multiatlas("items","items.json"),this.load.image("spiked_ball","spikedball.png"),this.load.atlas("explosion","explosion.png","explosion.json"),e=this,l.forEach((function(t){Array.isArray(t.command)?t.command.forEach((function(n){return e.load.audio(n,t.file)})):e.load.audio(t.command,t.file)}))}},{key:"create",value:function(){var e;(function(e){var t=e.anims.generateFrameNames("items",{start:1,end:8,zeroPad:4,prefix:"coin/",suffix:".png"});e.anims.create({key:"coin_spin",frames:t,frameRate:10,repeat:-1})})(e=this),function(e){var t=e.anims.generateFrameNames("items",{start:0,end:6,zeroPad:4,prefix:"gems/blue/frame",suffix:".png"});e.anims.create({key:"gem_blue_spin",frames:t,frameRate:10,repeat:-1})}(e),function(e){var t=e.anims.generateFrameNames("items",{start:0,end:6,zeroPad:4,prefix:"gems/red/frame",suffix:".png"});e.anims.create({key:"gem_red_spin",frames:t,frameRate:10,repeat:-1})}(e),function(e){i.forEach((function(t){!function(e,t){var n=t.anims.generateFrameNames("holiday-characters",{start:e.start,end:e.end,zeroPad:3,prefix:e.prefix,suffix:".png"});t.anims.create({key:e.key,frames:n,frameRate:e.rate||5,repeat:e.repeat})}(t,e)}))}(this),this.scene.start("Game")}},{key:"showCover",value:function(){this.add.image(0,0,"splash-screen").setOrigin(0)}},{key:"showProgressBar",value:function(){var e=this.textures.get("progress-bar").get(),t=e.width,n=e.height,r=this.add.sprite(82,282,"progress-bar").setOrigin(0);this.load.on("progress",(function(e){return r.setCrop(0,0,Math.ceil(e*t),n)}))}}])&&p(n.prototype,r),o&&p(n,o),a}(),b=(n(1566),n(1567),n(308),n(34)),_=n.n(b);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(s,Phaser.GameObjects.Sprite);var t,n,r,o,i=(t=s,function(){var e,n=O(t);if(C()){var r=O(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return k(this,e)});function s(e){var t,n=e.scene,r=e.key,o=e.frame;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var a=n.game.config.height,c=n.game.config.width,u=Phaser.Math.Between(0,c),l=n.physics.world.gravity.y<0?a:0;return t=i.call(this,n,u,l,r,o),n.physics.world.enable(S(t)),n.add.existing(S(t)),t._timers=[],t}return n=s,(r=[{key:"createDelayedCall",value:function(e,t){this._timers.push(this.scene.time.delayedCall(e,t,[],this))}},{key:"destroyTimers",value:function(){this._timers.map((function(e){return e.destroy()}))}},{key:"isGravityReversed",get:function(){return this.scene.physics.world.gravity.y<0}},{key:"gravityModifier",get:function(){return this.isGravityReversed?-1:1}},{key:"onGround",get:function(){return this.isGravityReversed?this.body.blocked.up:this.body.blocked.down}}])&&x(n.prototype,r),o&&x(n,o),s}();n(617),n(620);function T(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n,r,o,i,s,a){var c=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.x=n,this.y=r,this.bubbleWidth=o,this.bubbleHeight=i,this.bubblePadding=10,this.bubble=this.buildBubble(),this.buildContent(s,a).then((function(e){c.content=e})),this.positionContent()}var t,n,r,o,i;return t=e,(n=[{key:"buildContent",value:(o=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.substring(0,20),e.abrupt("return",this.scene.add.text(0,0,r,{fontFamily:"Arial",fontSize:20,color:"#000000",align:"center",wordWrap:{width:this.bubbleWidth-2*this.bubblePadding}}));case 2:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function s(e){T(i,n,r,s,a,"next",e)}function a(e){T(i,n,r,s,a,"throw",e)}s(void 0)}))},function(e,t){return i.apply(this,arguments)})},{key:"buildBubble",value:function(){var e=this.bubbleHeight/4,t=this.scene.add.graphics({x:this.x,y:this.y});t.fillStyle(2236962,.5),t.fillRoundedRect(6,6,this.bubbleWidth,this.bubbleHeight,16),t.fillStyle(16777215,1),t.lineStyle(4,5658198,1),t.strokeRoundedRect(0,0,this.bubbleWidth,this.bubbleHeight,16),t.fillRoundedRect(0,0,this.bubbleWidth,this.bubbleHeight,16);var n=Math.floor(this.bubbleWidth/7),r=this.bubbleHeight,o=Math.floor(this.bubbleWidth/7*2),i=this.bubbleHeight,s=Math.floor(this.bubbleWidth/7),a=Math.floor(this.bubbleHeight+e);return t.lineStyle(4,2236962,.5),t.lineBetween(o-1,i+6,s+2,a),t.fillTriangle(n,r,o,i,s,a),t.lineStyle(2,5658198,1),t.lineBetween(o,i,s,a),t.lineBetween(n,r,s,a),t}},{key:"setPosition",value:function(e,t){this.bubble.setPosition(e,t),this.positionContent()}},{key:"positionContent",value:function(){if(this.content){var e=this.content.getBounds();this.content.setPosition(this.bubble.x+this.bubbleWidth/2-e.width/2,this.bubble.y+this.bubbleHeight/2-e.height/2)}}},{key:"destroy",value:function(){this.bubble.destroy(),this.content.destroy()}}])&&R(t.prototype,n),r&&R(t,r),e}();n(1579);function D(){return function(e){var t;try{t=window[e];var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}("localStorage")}function M(e,t){return parseInt(function(e,t){if(D()){var n="".concat(e.user,"-").concat(t);return localStorage.getItem(n)}}(e,t))}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}function I(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(r,e);var t,n=(t=r,function(){var e,n=F(t);if(B()){var r=F(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return I(this,e)});function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).type="user",t.user=e.user,t.flags=e.flags,console.log("created UserSprite for",e.user,e.flags),t.body.onCollide=!0,t.body.maxVelocity.x=200,t.nameText,t.speechBubble,t.spinEnabled=!1,t.isDead=!1,t.running=!1,t.lurking=!0,t.knitCodeMonkeyState=!1,t.setScale(.7),t.setOrigin(.5),t.body.setVelocity(200*(Math.random()-.5),0),e.scene.events.on("userChatAction",t.handleChatEvent,G(t)),t.initMovementTimer(),t}return N(r,null,[{key:"triggerTheWave",value:function(e,t){e.getChildren().forEach((function(e){var n=e.x,r=e;t.time.delayedCall(n,(function(){r.jump()}))}))}},{key:"chatBubbleAllSprites",value:function(e,t){e.getChildren().forEach((function(e){e.displaySpeechBubble(t)}))}},{key:"userParted",value:function(e,t){var n=r.userExists(e,t);n&&n.remove()}},{key:"userExists",value:function(e,t){return n=function(e){return e.user.toLowerCase()===t.toLowerCase()},e.getChildren().find(n);var n}},{key:"createOrFindUser",value:function(e,t,n,o){var i=r.userExists(e,n);return i||(i=new r({scene:t,key:"character_inactive",user:n,flags:o}),e.add(i),i)}}]),N(r,[{key:"handleChatEvent",value:function(e){var t=e.user,n=e.message,r=e.flags,o=e.method,i=e.args,s=e.applyAll,a=void 0!==s&&s;if(t.toLowerCase()===this.user.toLowerCase())this.setFlags(r);else if(!a)return;if(!this.isDead){var c=this[o];console.log("handleChatEvent",o,this[o]),c&&(i?c.call(this,i):c.call(this,n,r))}}},{key:"update",value:function(){if(this.body.setCircle(this.texture.width/2),this.isDead)return this.body.setVelocity(0,300),void this.selectAnimation();if(this.knitCodeMonkeyState&&this.onGround&&(this.knitCodeMonkeyState=!1,this.changeCharacter(this.ogCharacter)),(t=this).body.onFloor()&&t.body.touching.up){var e=100;this.flipX&&(e*=-1),this.body.setVelocity(e,-400*this.gravityModifier)}var t;if(this.spinEnabled){var n=this.flipX?-600:600;this.body.setAngularVelocity(n)}else this.body.setAngularVelocity(0),this.setRotation(0);if(this.running){var r=200;this.flipX&&(r*=-1),this.body.setVelocityX(r)}this.selectAnimation(),this.lookInWalkingDirection(),this.moveText()}},{key:"waveJump",value:function(){var e=this;this.createDelayedCall(this.x,(function(){e.jump()}))}},{key:"setFlags",value:function(e){this.flags=e,e.subscriber&&"peasant"===this.character&&this.changeCharacter("knight")}},{key:"changeCharacter",value:function(e){this.character=e}},{key:"displayNameText",value:function(){this.nameText||(this.nameText=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{x:.5,y:.5},o=e.add.text(n.x,n.y,t,{fontFamily:"Arial",fontSize:32,color:"#ffff00"});return o.setOrigin(r.x,r.y),o}(this.scene,this.user),this.nameText.setOrigin(.5,1),this.scene.nameTextGroup.add(this.nameText))}},{key:"displaySpeechBubble",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;this.speechBubble&&this.speechBubble.destroy(),this.speechBubble=new j(this.scene,0,0,125,50,e,t),this.createDelayedCall(r,(function(){n.speechBubble&&n.speechBubble.destroy()}))}},{key:"initMovementTimer",value:function(){var e=this,t=Phaser.Math.Between(1e4,2e4);this.createDelayedCall(t,(function(){e.randomMovement()}))}},{key:"randomMovement",value:function(){var e;(e=this,Math.abs(e.body.velocity.x)&&Math.abs(e.body.velocity.y))||(0===Phaser.Math.Between(0,1)?this.walk():this.jump());this.initMovementTimer()}},{key:"walk",value:function(){var e=Phaser.Math.Between(0,1)?100:-100;this.body.setVelocityX(e)}},{key:"startRunning",value:function(){var e=this,t=200;this.flipX&&(t*=-1),this.body.setVelocityX(t),this.running=!0,this.createDelayedCall(2e3,(function(){e.running=!1}))}},{key:"jump",value:function(){if(this.onGround){var e=Phaser.Math.Between(-300,300);this.body.setVelocityX(e),this.body.setVelocityY(-400*this.gravityModifier)}}},{key:"sendFlyingOnCollide",value:function(e){var t=e.skeleton;this.body.setVelocityY(-800*this.gravityModifier),t&&!this.knitCodeMonkeyState&&(this.knitCodeMonkeyState=!0,this.ogCharacter=this.character,this.changeCharacter("skeleton"))}},{key:"makeDbag",value:function(){var e=this;this.isDbag=!0,this.body.setImmovable(!0),this.startRunning(),this.body.setDragX(0),this.displaySpeechBubble("RAWRR!!!",null,1e4),this.createDelayedCall(1e4,(function(){return e.disableDbag()}))}},{key:"disableDbag",value:function(){this.isDbag=!1,this.body.setDragX(100),this.body.setImmovable(!1)}},{key:"tackle",value:function(e){var t=this,n=/@(\w+)/g.exec(e);if(n){var o=r.userExists(this.scene.userGroup,n[1]);o&&(this.body.setImmovable(!0),this.body.maxVelocity.x=1e7,this.scene.physics.moveToObject(this,o,150,1e3),this.displaySpeechBubble("BOOLI!!!",null,2e3),this.createDelayedCall(1100,(function(){t.body.setImmovable(!1),t.body.maxVelocity.x=200})))}}},{key:"spin",value:function(){var e=this;this.spinEnabled=!0,this.displaySpeechBubble("WEEEE!!!",null,5e3),this.createDelayedCall(5e3,(function(){return e.spinEnabled=!1}))}},{key:"makeGiant",value:function(){var e=this;this.setScale(3),this.createDelayedCall(2e4,(function(){return e.setScale(.7)}))}},{key:"moveText",value:function(){var e=this.y-.5*this.height;this.nameText&&this.nameText.setPosition(this.x,e),this.speechBubble&&this.speechBubble.setPosition(this.x,this.y-this.height)}},{key:"selectAnimation",value:function(){this.lurking?this.setTexture("character_inactive"):this.setTexture("character_active")}},{key:"lookInWalkingDirection",value:function(){if(0!==this.body.velocity.x){var e=this.body.velocity.x<0;this.setFlipX(e)}}},{key:"sayCoinsCount",value:function(){var e=M(this,"coins")||0;this.displaySpeechBubble("I have ".concat(e," coins :)"),null,1e4)}},{key:"coinCollected",value:function(e){var t=M(this,"coins")||0;!function(e,t,n){if(D()){var r="".concat(e.user,"-").concat(t);localStorage.setItem(r,n)}}(this,"coins",t+=e)}},{key:"lurk",value:function(){this.displaySpeechBubble("lurk sha sha"),this.removeNameTag(),this.lurking=!0,this.selectAnimation()}},{key:"remove",value:function(){var e=this;this.isDead=!0,this.createDelayedCall(1e4,(function(){e.scene.userGroup.remove(e),e.scene.events.removeListener("userChatAction",e.handleChatEvent,e),e.destroyTimers(),e.removeNameTag(),e.destroy()}))}},{key:"removeNameTag",value:function(){this.nameText&&(this.scene.nameTextGroup.remove(this.nameText),this.nameText.destroy())}}]),r}(P);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(s,e);var t,n,r,o,i=(t=s,function(){var e,n=q(t);if(X()){var r=q(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return V(this,e)});function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"items",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"coin/0001.png";return z(this,s),(t=i.call(this,{scene:e,key:n,frame:r})).type="bit",t.amount=1,t.setOrigin(.5),t}return n=s,(r=[{key:"update",value:function(){this.play("coin_spin",!0)}},{key:"grabbed",value:function(){f(this.scene,"collect_coin",{broadcaster:!0}),this.scene.coinsGroup.remove(this),this.destroy()}}])&&J(n.prototype,r),o&&J(n,o),s}(P);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(s,e);var t,n,r,o,i=(t=s,function(){var e,n=te(t);if(ee()){var r=te(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Z(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e,"items","gems/blue/frame0000.png")).type="blue_gem",t.amount=100,t.setScale(2),t}return n=s,(r=[{key:"update",value:function(){this.play("gem_blue_spin",!0)}}])&&Q(n.prototype,r),o&&Q(n,o),s}(K);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(s,e);var t,n,r,o,i=(t=s,function(){var e,n=ce(t);if(ae()){var r=ce(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return se(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e,"items","gems/red/frame0000.png")).type="red_gem",t.amount=500,t.setScale(3),t}return n=s,(r=[{key:"update",value:function(){this.play("gem_red_spin",!0)}}])&&ie(n.prototype,r),o&&ie(n,o),s}(K);function fe(e,t,n,r,o,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function he(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pe=function(){function e(t,n,r,o,i,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scene=t,this.x=n,this.y=r,this.bubbleWidth=o,this.bubbleHeight=i,this.bubblePadding=10,this.bubble=this.buildBubble(),this.buildContent(s),this.setPosition()}var t,n,r,o,i;return t=e,(n=[{key:"buildContent",value:(o=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.content=this.scene.add.text(0,0,t,{fontFamily:"Arial",fontSize:30,color:"#000000",align:"left",wordWrap:{width:this.bubbleWidth-2*this.bubblePadding}});case 1:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function s(e){fe(i,n,r,s,a,"next",e)}function a(e){fe(i,n,r,s,a,"throw",e)}s(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"buildBubble",value:function(){var e=this.scene.add.graphics({x:this.x,y:this.y});return e.fillStyle(2236962,.5),e.fillRoundedRect(6,6,this.bubbleWidth,this.bubbleHeight,16),e.fillStyle(16777215,1),e.lineStyle(4,5658198,1),e.strokeRoundedRect(0,0,this.bubbleWidth,this.bubbleHeight,16),e.fillRoundedRect(0,0,this.bubbleWidth,this.bubbleHeight,16),e}},{key:"setPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.x,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.y;this.bubble.setPosition(e,t),this.positionContent()}},{key:"positionContent",value:function(){this.content&&(this.content.getBounds(),this.content.setPosition(this.bubble.x+this.bubblePadding,this.bubble.y+this.bubblePadding))}},{key:"destroy",value:function(){this.bubble.destroy(),this.content.destroy()}}])&&he(t.prototype,n),r&&he(t,r),e}(),me=[{command:"run",method:"startRunning",event:"userChatAction"},{command:"jump",method:"jump",event:"userChatAction"},{command:"dbag",method:"makeDbag",event:"userChatAction"},{command:"spin",method:"spin",event:"userChatAction"},{command:"die",method:"remove",event:"userChatAction"},{command:"mushroom",method:"makeGiant",event:"userChatAction"},{command:"booli",method:"tackle",event:"userChatAction"},{command:"coins",method:"sayCoinsCount",event:"userChatAction"},{command:"wave",method:"waveJump",event:"userChatAction",applyAll:!0},{command:"lurk",method:"lurk",event:"userChatAction"},{command:"princess",method:"changeCharacter",event:"userChatAction",args:["princess"]},{command:"wizard",method:"changeCharacter",event:"userChatAction",args:["wizard_2"]},{command:"snowman",method:"changeCharacter",event:"userChatAction",args:["snowman"]},{command:"join",method:"addUserSprite",event:"sceneEvent"},{command:"fireworks",method:"triggerFireworks",event:"sceneEvent"},{command:"reverse",method:"reverseGravity",event:"sceneEvent"},{command:"ball",method:"addSpikedBall",event:"sceneEvent"},{command:"controls",method:"displayControls",event:"sceneEvent"},{command:"audio",method:"displayAudioCommands",event:"sceneEvent"},{command:"subs",method:"subCelebrate",event:"sceneEvent",private:!0},{command:"addcoins",method:"simulateCheer",event:"sceneEvent",private:!0},{command:"clearCoins",method:"clearBrowserStorage",event:"sceneEvent",private:!0},{command:"raidTest",method:"raidAlert",event:"sceneEvent",private:!0},{command:"so",method:"voiceShoutOut",event:"sceneEvent",private:!0},{command:"tts",method:"textToSpeech",event:"sceneEvent",private:!0}];function de(e,t,n,r,o,i){var s=me.find((function(e){return e.command.toLowerCase()===t.toLowerCase()})),a=i.sinceLastCommand.user;if(s){if(!s.event)throw new Error("Must provide event name");u(s,o,a)&&e.events.emit(s.event,{user:n,message:r,flags:o,method:s.method,args:s.args,applyAll:s.applyAll})}}var ge=[{id:"2897ba61-3d4f-4076-a6e5-ecb8f4b0f19d",name:"Text to Speech",method:"textToSpeech",event:"sceneEvent"}];function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?_e(e):t}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(s,e);var t,n,r,o,i=(t=s,function(){var e,n=xe(t);if(we()){var r=xe(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return be(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,{scene:e,key:"spiked_ball"})).type="ball",t.body.setCollideWorldBounds(!0),t.setOrigin(.5),t.scene.ballGroup.add(_e(t)),t.createDelayedCall(6e4,(function(){return t.remove()})),t}return n=s,(r=[{key:"update",value:function(){this.body.setImmovable(!0);var e=.05;this.body.velocity.x<0?(e*=-1,this.body.velocity.x=-150):this.body.velocity.x=150,this.rotation+=e}},{key:"remove",value:function(){this.scene.ballGroup.remove(this),this.destroy()}}])&&ve(n.prototype,r),o&&ve(n,o),s}(P);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(c,Phaser.Scene);var t,n,r,o,i=(t=c,function(){var e,n=Te(t);if(Pe()){var r=Te(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Ee(this,e)});function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=i.call(this,{key:"Game"})).bitTotal=0,e}return n=c,(r=[{key:"create",value:function(){var e,t=this;this.initComfy(),this.userGroup=this.physics.add.group({bounceX:1,bounceY:.5,dragX:100,collideWorldBounds:!0}),this.coinsGroup=this.physics.add.group({bounceX:1,bounceY:.5,dragX:100,collideWorldBounds:!0}),this.ballGroup=this.physics.add.group({bounceX:1,bounceY:.5,velocityX:50,collideWorldBounds:!0}),this.ballGroup.runChildUpdate=!0,this.nameTextGroup=this.physics.add.group({allowGravity:!1,collideWorldBounds:!0}),this.physics.add.collider(this.userGroup),this.physics.add.collider(this.coinsGroup),this.physics.add.collider(this.nameTextGroup),this.physics.add.collider(this.ballGroup),this.physics.add.collider(this.ballGroup,this.userGroup),this.physics.add.overlap(this.coinsGroup,this.userGroup,this.collectCoin),this.physics.world.on("collide",(function(e,n){return t.onCollision(e,n)})),this.explosion=((e=this.add.particles("explosion")).createEmitter({frame:["smoke-puff","cloud","smoke-puff"],angle:{min:240,max:300},speed:{min:200,max:300},quantity:6,lifespan:2e3,alpha:{start:1,end:0},scale:{start:1.5,end:.5},on:!1}),e.createEmitter({frame:"red",angle:{min:0,max:360,steps:32},lifespan:1e3,speed:400,quantity:32,scale:{start:.3,end:0},on:!1}),e.createEmitter({frame:"muzzleflash2",lifespan:200,scale:{start:2,end:0},rotate:{start:0,end:180},on:!1}),e),this.setupAudio(),this.events.on("sceneEvent",this.onEvent,this)}},{key:"setupAudio",value:function(){var e;e=this,l.forEach((function(t){Array.isArray(t.command)?t.command.forEach((function(n){return e.sound.add(n,t.config)})):e.sound.add(t.command,t.config)}))}},{key:"onEvent",value:function(e){var t=e.user,n=e.message,r=e.flags,o=e.method,i=e.args,s=this[o];s&&(i?s.call(this,i):s.call(this,t,n,r))}},{key:"update",value:function(e,t){var n=this;!function(e){var t,n=Phaser.Math.Between(1,10);if(5===n&&e.bitTotal>=500)e.bitTotal-=500,t=new le(e);else if(5===n&&e.bitTotal>=100)e.bitTotal-=100,t=new re(e);else{if(!(e.bitTotal>0))return;e.bitTotal--,t=new K(e)}e.coinsGroup.add(t)}(this),this.userGroup.getChildren().forEach((function(e){n.celebrate&&Phaser.Math.Between(0,1)&&e.jump(),e.update()})),this.coinsGroup.getChildren().forEach((function(e){e.update()})),this.ballGroup.preUpdate(e,t)}},{key:"initComfy",value:function(){var e,t,n=this,r=(e="channel",t=window.location.search,new URLSearchParams(t).get(e)||"bad_dubs");_.a.Init(r,null,[r]),_.a.onJoin=function(e,t){console.log("onJoin",e),n.userGroup.getChildren().length>=40||n.addUserSprite(e)},_.a.onPart=function(e){return U.userParted(n.userGroup,e)},_.a.onCommand=function(e,t,r,o,i){var s;de(n,t,e,r,o,i),f(n,t,o),((s=r.match(/!(\w+)/g))?s.map((function(e){return e.slice(1)})):[]).forEach((function(t){de(n,t,e,r,o,i),f(n,t,o)}))},_.a.onChat=function(e,t,r,o,i){i.customRewardId&&function(e,t,n,r){var o=ge.find((function(e){return e.id===n}));o&&e.events.emit(o.event,{user:t,message:r,method:o.method,args:o.args,applyAll:o.applyAll})}(n,e,i.customRewardId,t);var s=n.addUserSprite(e,t,r);s&&(s.displayNameText(),s.displaySpeechBubble(t,i),s.lurking=!1,s.selectAnimation(),/^(hi|hey|hello|howdy)$/i.exec(t)&&n.sound.play("hello"))},_.a.onCheer=function(e,t,r){f(n,"raygun",{broadcaster:!0}),n.bitTotal+=t},_.a.onHosted=function(){return f(n,"raygun",{broadcaster:!0})},_.a.onRaid=function(e,t){return n.raidAlert(e,t)},_.a.onSub=function(){return n.subCelebrate()},_.a.onResub=function(){return n.subCelebrate()},_.a.onSubGift=function(){return n.subCelebrate()},_.a.onSubMysteryGift=function(){return f(n,"raygun",{broadcaster:!0})},_.a.onGiftSubContinue=function(e,t,r){return f(n,"raygun",{broadcaster:!0})}}},{key:"raidAlert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The Goose",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"50";f(this,"raygun",{broadcaster:!0}),this.time.delayedCall(2500,(function(){a("raid alert, i repeat raid alert, ".concat(e," is attacking with ").concat(t," twitchers"))}))}},{key:"voiceShoutOut",value:function(e,t){a("Shout Out to ".concat(t,". They're totally awesome sauce, you should check out their stream."))}},{key:"simulateCheer",value:function(e,t){this.bitTotal+=t}},{key:"textToSpeech",value:function(e,t){a(t)}},{key:"triggerFireworks",value:function(){for(var e=this,t=Phaser.Math.Between(3,5),n=function(t){var n=Phaser.Math.Between(0,e.game.config.width),r=Phaser.Math.Between(0,e.game.config.height/2);e.time.delayedCall(500*t,(function(){e.explosion.emitParticleAt(n,r),f(e,"explode",{broadcaster:!0})}))},r=0;r<t;r++)n(r)}},{key:"reverseGravity",value:function(){var e=this;this.physics.world.gravity.y=-400,f(this,"raygun",{broadcaster:!0}),this.time.delayedCall(6e4,(function(){e.physics.world.gravity.y=400}))}},{key:"addUserSprite",value:function(e,t,n){var r=U.createOrFindUser(this.userGroup,this,e,n);return r.walk(),r}},{key:"addSpikedBall",value:function(){new Se(this)}},{key:"subCelebrate",value:function(){var e=this;f(this,"raygun",{broadcaster:!0}),this.celebrate=!0,U.chatBubbleAllSprites(this.userGroup,"Pog"),this.time.delayedCall(1e4,(function(){e.triggerFireworks(),e.celebrate=!1}))}},{key:"collectCoin",value:function(e,t){t.coinCollected(e.amount),e.grabbed()}},{key:"onTextOverlap",value:function(e,t){}},{key:"onCollision",value:function(e,t){"user"===e.type&&"user"===t.type?e.body.immovable?t.sendFlyingOnCollide({}):t.body.immovable&&e.sendFlyingOnCollide({}):"ball"===e.type&&"user"===t.type&&t.sendFlyingOnCollide({skeleton:!0})}},{key:"displayControls",value:function(){this.displayTextbox("~~ CONTROLS ~~",me)}},{key:"displayAudioCommands",value:function(){this.displayTextbox("~~ AUDIO ~~",l)}},{key:"displayTextbox",value:function(e,t){var n=[e],r=Array.from(t);r.sort(s),r.forEach((function(e){e.private||n.push("!"+e.command)}));var o=new pe(this,10,10,300,35*n.length,n.join("\n"));this.time.addEvent({delay:2e4,callback:function(){return o.destroy()},loop:!1})}},{key:"clearBrowserStorage",value:function(){localStorage.clear()}}])&&Oe(n.prototype,r),o&&Oe(n,o),c}(),De=n(621),Me=n.n(De),Ae=n(197),Le=!0,Ne=1280,Ie=720,Ge=1,Be=1,Fe=Phaser.AUTO,We=!1,Ue=!1,He=!0,ze="display: block; margin: 0 auto;",Je={arcade:{gravity:{y:300}},default:"arcade"},Ve={path:"assets/"},Xe={global:[{key:"GameScalePlugin",plugin:Me.a,mapping:"gameScale",data:{maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mode:"fit"}}],scene:[]},qe=Object.values(r);function Ye(){return new Phaser.Game(o)}Ye()},190:function(e,t,n){var r=n(119),o=n(32),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(141)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},191:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},192:function(e,t,n){var r=n(50).f,o=n(99),i=n(27)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},193:function(e,t,n){var r=n(146);e.exports=function(e){return Object(r(e))}},194:function(e,t,n){var r=n(145),o=n(27)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},195:function(e,t){t.f={}.propertyIsEnumerable},196:function(e,t,n){"use strict";var r=n(51),o=n(1558)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(596)("find")},197:function(e){e.exports=JSON.parse('{"a":"Twitch Chat Overlay","c":"1.0.0","b":"https://example.com/"}')},198:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},27:function(e,t,n){var r=n(190)("wks"),o=n(142),i=n(32).Symbol,s="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:o)("Symbol."+e))}).store=r},303:function(e,t,n){var r=n(43),o=n(32).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},304:function(e,t,n){var r=n(43);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},305:function(e,t,n){var r=n(33),o=n(1545),i=n(307),s=n(306)("IE_PROTO"),a=function(){},c=function(){var e,t=n(303)("iframe"),r=i.length;for(t.style.display="none",n(601).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=r(e),n=new a,a.prototype=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},306:function(e,t,n){var r=n(190)("keys"),o=n(142);e.exports=function(e){return r[e]||(r[e]=o(e))}},307:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},308:function(e,t,n){n(44)&&"g"!=/./g.flags&&n(50).f(RegExp.prototype,"flags",{configurable:!0,get:n(309)})},309:function(e,t,n){"use strict";var r=n(33);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},32:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},33:function(e,t,n){var r=n(43);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},34:function(e,t,n){var r=n(1569),o={global:{},users:{}},i="",s=null,a=!0,c=0,u={isDebug:!1,chatModes:{},version:function(){return"@VERSION"},onError:function(e){console.error("Error:",e)},onCommand:function(e,t,n,r,o){u.isDebug&&console.log("onCommand default handler")},onChat:function(e,t,n,r,o){u.isDebug&&console.log("onChat default handler")},onWhisper:function(e,t,n,r,o){u.isDebug&&console.log("onWhisper default handler")},onMessageDeleted:function(e,t){u.isDebug&&console.log("onMessageDeleted default handler")},onJoin:function(e,t){u.isDebug&&console.log("onJoin default handler")},onPart:function(e,t){u.isDebug&&console.log("onPart default handler")},onHosted:function(e,t,n){u.isDebug&&console.log("onHosted default handler")},onRaid:function(e,t){u.isDebug&&console.log("onRaid default handler")},onSub:function(e,t,n,r){u.isDebug&&console.log("onSub default handler")},onResub:function(e,t,n,r,o,i){u.isDebug&&console.log("onResub default handler")},onSubGift:function(e,t,n,r,o,i){u.isDebug&&console.log("onSubGift default handler")},onSubMysteryGift:function(e,t,n,r,o){u.isDebug&&console.log("onSubMysteryGift default handler")},onGiftSubContinue:function(e,t,n){u.isDebug&&console.log("onGiftSubContinue default handler")},onCheer:function(e,t,n){u.isDebug&&console.log("onCheer default handler")},onChatMode:function(e,t){u.isDebug&&console.log("onChatMode default handler")},onConnected:function(e,t,n){},onReconnect:function(e){},Say:function(e,t){return!!s&&(t||(t=i),s.say(t,e).catch(u.onError),!0)},Whisper:function(e,t){return!!s&&(s.whisper(t,e).catch(u.onError),!0)},DeleteMessage:function(e,t){return!!s&&(t||(t=i),s.deletemessage(t,e).catch(u.onError),!0)},GetClient:function(){return s},Init:function(e,t,n,l){if(("string"==typeof(n=n||[e])||n instanceof String)&&(n=[n]),!Array.isArray(n))throw new Error("Channels is not an array");u.isDebug=l,i=n[0];var f={options:{debug:l},connection:{reconnect:!0,secure:!0},channels:n};t&&(f.identity={username:e,password:t}),(s=new r.client(f)).on("roomstate",(function(e,t){try{var n=e.replace("#","");u.chatModes[n]=u.chatModes[n]||{},"emote-only"in t&&(u.chatModes[n].emoteOnly=t["emote-only"]),"followers-only"in t&&(u.chatModes[n].followerOnly=t["followers-only"]>=0),"subs-only"in t&&(u.chatModes[n].subOnly=t["subs-only"]),"r9k"in t&&(u.chatModes[n].r9kMode=t.r9k),"slow"in t&&(u.chatModes[n].slowMode=t.slow),u.onChatMode(u.chatModes[n],n)}catch(e){u.onError(e)}})),s.on("message",(function(t,n,r,i){try{var s=n["display-name"]||n.username||e,a="#"+n.username===t,c=n.mod,l=n.badges&&"0"===n.badges.founder,f=l||n.badges&&void 0!==n.badges.subscriber||n.subscriber,h=n.badges&&"1"===n.badges.vip||!1,p="highlighted-message"===n["msg-id"],m=n["user-id"],d=n.id,g=n["room-id"],y=n.badges,v=n.color,b=n.emotes,_=n.flags,w=n["tmi-sent-ts"],x=n["emote-only"]||!1,k=n["message-type"],S=n["custom-reward-id"]||null,C={broadcaster:a,mod:c,founder:l,subscriber:f||l,vip:h,highlighted:p,customReward:!!S},O={id:d,channel:t.replace("#",""),roomId:g,messageType:k,messageEmotes:b,isEmoteOnly:x,userId:m,username:n.username,displayName:n["display-name"],userColor:v,userBadges:y,customRewardId:S,flags:_,timestamp:w};if(i||"!"!==r[0])"action"===k||"chat"===k?u.onChat(s,r,C,i,O):"whisper"===k&&u.onWhisper(s,r,C,i,O);else{var E=r.split(/ (.*)/),P=E[0].slice(1).toLowerCase(),T=E[1]||"";O.sinceLastCommand=function(e,t){if(!e)return{any:null,user:null};var n=new Date,r={};return o.global[e]?r.any=n-o.global[e]:r.any=0,o.global[e]=n,t?(o.users[t]||(o.users[t]={}),o.users[t][e]?r.user=n-o.users[t][e]:r.user=0,o.users[t][e]=n):r.user=null,r}(P,m),u.onCommand(s,P,T,C,O)}}catch(e){u.onError(e)}})),s.on("messagedeleted",(function(e,t,n,r){try{var o=r["target-msg-id"],i={id:o,roomId:r["room-id"],username:t,message:n};u.onMessageDeleted(o,i)}catch(e){u.onError(e)}})),s.on("join",(function(e,t,n){u.onJoin(t,n)})),s.on("part",(function(e,t,n){u.onPart(t,n)})),s.on("hosted",(function(e,t,n,r){u.onHosted(t,n,r)})),s.on("raided",(function(e,t,n){u.onRaid(t,n)})),s.on("cheer",(function(e,t,n){var r=~~t.bits,o=t["room-id"],i=t["display-name"]||t.username||t.login,s=t["user-id"],a="#"+t.username===e,c=t.mod,l=t.badges&&"0"===t.badges.founder,f={broadcaster:a,mod:c,founder:l,subscriber:l||t.badges&&void 0!==t.badges.subscriber||t.subscriber,vip:t.badges&&"1"===t.badges.vip||!1},h={id:t.id,channel:e.replace("#",""),roomId:o,userId:s,username:t.username,userColor:t.color,userBadges:t.badges,displayName:t["display-name"],messageEmotes:t.emotes,subscriber:t.subscriber};u.onCheer(i,n,r,f,h)})),s.on("subscription",(function(e,t,n,r,o){var i={id:o.id,roomId:o["room-id"],messageType:o["message-type"],messageEmotes:o.emotes,userId:o["user-id"],username:o.login,displayName:o["display-name"],userColor:o.color,userBadges:o.badges};u.onSub(t,r,n,i)})),s.on("resub",(function(e,t,n,r,o,i){var s=~~o["msg-param-cumulative-months"],a={id:o.id,roomId:o["room-id"],messageType:o["message-type"],messageEmotes:o.emotes,userId:o["user-id"],username:o.login,displayName:o["display-name"],userColor:o.color,userBadges:o.badges};u.onResub(t,r,n,s,i,a)})),s.on("subgift",(function(e,t,n,r,o,i){var s=~~i["msg-param-sender-count"],a={id:i.id,roomId:i["room-id"],messageType:i["message-type"],messageEmotes:i.emotes,userId:i["user-id"],username:i.login,displayName:i["display-name"],userColor:i.color,userBadges:i.badges,recipientDisplayName:i["msg-param-recipient-display-name"],recipientUsername:i["msg-param-recipient-user-name"],recipientId:i["msg-param-recipient-id"]};u.onSubGift(t,n,r,s,o,a)})),s.on("submysterygift",(function(e,t,n,r,o){var i=~~o["msg-param-sender-count"],s={id:o.id,roomId:o["room-id"],messageType:o["message-type"],messageEmotes:o.emotes,userId:o["user-id"],username:o.login,displayName:o["display-name"],userColor:o.color,userBadges:o.badges,recipientDisplayName:o["msg-param-recipient-display-name"],recipientUsername:o["msg-param-recipient-user-name"],recipientId:o["msg-param-recipient-id"],userMassGiftCount:~~o["msg-param-mass-gift-count"]};u.onSubMysteryGift(t,n,i,r,s)})),s.on("giftpaidupgrade",(function(e,t,n,r){var o={id:r.id,roomId:r["room-id"],messageType:r["message-type"],messageEmotes:r.emotes,userId:r["user-id"],username:r.login,displayName:r["display-name"],userColor:r.color,userBadges:r.badges,gifterUsername:r["msg-param-sender-login"],gifterDisplayName:r["msg-param-sender-name"]};u.onGiftSubContinue(t,n,o)})),s.on("connected",(function(e,t){console.log("Connected:"+e+":"+t),u.onConnected(e,t,a),a=!1})),s.on("reconnect",(function(){console.log("Reconnecting"),c++,u.onReconnect(c)})),s.connect().catch(u.onError)}};e.exports&&(e.exports=u),"undefined"!=typeof window&&(window.ComfyJS=u,r=window.tmi)},43:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},44:function(e,t,n){e.exports=!n(97)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},45:function(e,t,n){"use strict";var r=n(194),o={};o[n(27)("toStringTag")]="z",o+""!="[object z]"&&n(81)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},50:function(e,t,n){var r=n(33),o=n(597),i=n(304),s=Object.defineProperty;t.f=n(44)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},51:function(e,t,n){var r=n(32),o=n(119),i=n(80),s=n(81),a=n(100),c=function(e,t,n){var u,l,f,h,p=e&c.F,m=e&c.G,d=e&c.S,g=e&c.P,y=e&c.B,v=m?r:d?r[t]||(r[t]={}):(r[t]||{}).prototype,b=m?o:o[t]||(o[t]={}),_=b.prototype||(b.prototype={});for(u in m&&(n=t),n)f=((l=!p&&v&&void 0!==v[u])?v:n)[u],h=y&&l?a(f,r):g&&"function"==typeof f?a(Function.call,f):f,v&&s(v,u,f,e&c.U),b[u]!=f&&i(b,u,h),g&&_[u]!=f&&(_[u]=f)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},595:function(e,t,n){"use strict";var r=n(596),o=n(1542),i=n(144),s=n(98);e.exports=n(599)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},596:function(e,t,n){var r=n(27)("unscopables"),o=Array.prototype;null==o[r]&&n(80)(o,r,{}),e.exports=function(e){o[r][e]=!0}},597:function(e,t,n){e.exports=!n(44)&&!n(97)((function(){return 7!=Object.defineProperty(n(303)("div"),"a",{get:function(){return 7}}).a}))},598:function(e,t,n){var r=n(145);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},599:function(e,t,n){"use strict";var r=n(141),o=n(51),i=n(81),s=n(80),a=n(144),c=n(1544),u=n(192),l=n(1548),f=n(27)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,m,d,g,y){c(n,t,m);var v,b,_,w=function(e){if(!h&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",k="values"==d,S=!1,C=e.prototype,O=C[f]||C["@@iterator"]||d&&C[d],E=O||w(d),P=d?k?w("entries"):E:void 0,T="Array"==t&&C.entries||O;if(T&&(_=l(T.call(new e)))!==Object.prototype&&_.next&&(u(_,x,!0),r||"function"==typeof _[f]||s(_,f,p)),k&&O&&"values"!==O.name&&(S=!0,E=function(){return O.call(this)}),r&&!y||!h&&!S&&C[f]||s(C,f,E),a[t]=E,a[x]=p,d)if(v={values:k?E:w("values"),keys:g?E:w("keys"),entries:P},y)for(b in v)b in C||i(C,b,v[b]);else o(o.P+o.F*(h||S),t,v);return v}},600:function(e,t,n){var r=n(99),o=n(98),i=n(1546)(!1),s=n(306)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),c=0,u=[];for(n in a)n!=s&&r(a,n)&&u.push(n);for(;t.length>c;)r(a,n=t[c++])&&(~i(u,n)||u.push(n));return u}},601:function(e,t,n){var r=n(32).document;e.exports=r&&r.documentElement},602:function(e,t,n){var r=n(32),o=n(119),i=n(141),s=n(603),a=n(50).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},603:function(e,t,n){t.f=n(27)},604:function(e,t){t.f=Object.getOwnPropertySymbols},605:function(e,t,n){var r=n(145);e.exports=Array.isArray||function(e){return"Array"==r(e)}},606:function(e,t,n){var r=n(600),o=n(307).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},607:function(e,t,n){var r=n(195),o=n(143),i=n(98),s=n(304),a=n(99),c=n(597),u=Object.getOwnPropertyDescriptor;t.f=n(44)?u:function(e,t){if(e=i(e),t=s(t,!0),c)try{return u(e,t)}catch(e){}if(a(e,t))return o(!r.f.call(e,t),e[t])}},608:function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},609:function(e,t,n){var r=n(191),o=n(146);e.exports=function(e){return function(t,n){var i,s,a=String(o(t)),c=r(n),u=a.length;return c<0||c>=u?e?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):i:e?a.slice(c,c+2):s-56320+(i-55296<<10)+65536}}},610:function(e,t,n){"use strict";var r=n(194),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},611:function(e,t,n){"use strict";n(1563);var r=n(81),o=n(80),i=n(97),s=n(146),a=n(27),c=n(612),u=a("species"),l=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var h=a(e),p=!i((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),m=p?!i((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[h](""),!t})):void 0;if(!p||!m||"replace"===e&&!l||"split"===e&&!f){var d=/./[h],g=n(s,h,""[e],(function(e,t,n,r,o){return t.exec===c?p&&!o?{done:!0,value:d.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),y=g[0],v=g[1];r(String.prototype,e,y),o(RegExp.prototype,h,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},612:function(e,t,n){"use strict";var r,o,i=n(309),s=RegExp.prototype.exec,a=String.prototype.replace,c=s,u=(r=/a/,o=/b*/g,s.call(r,"a"),s.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(e){var t,n,r,o,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),u&&(t=c.lastIndex),r=s.call(c,e),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),l&&r&&r.length>1&&a.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},613:function(e,t,n){var r=n(33);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},614:function(e,t,n){var r=n(144),o=n(27)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},615:function(e,t,n){var r=n(194),o=n(27)("iterator"),i=n(144);e.exports=n(119).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},616:function(e,t,n){var r=n(27)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],s=i[r]();s.next=function(){return{done:n=!0}},i[r]=function(){return s},e(i)}catch(e){}return n}},617:function(e,t,n){"use strict";var r,o,i,s,a=n(141),c=n(32),u=n(100),l=n(194),f=n(51),h=n(43),p=n(120),m=n(1570),d=n(1571),g=n(1572),y=n(618).set,v=n(1573)(),b=n(619),_=n(1574),w=n(1575),x=n(1576),k=c.TypeError,S=c.process,C=S&&S.versions,O=C&&C.v8||"",E=c.Promise,P="process"==l(S),T=function(){},R=o=b.f,j=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(27)("species")]=function(e){e(T,T)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t&&0!==O.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),D=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;v((function(){for(var r=e._v,o=1==e._s,i=0,s=function(t){var n,i,s,a=o?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(o||(2==e._h&&N(e),e._h=1),!0===a?n=r:(l&&l.enter(),n=a(r),l&&(l.exit(),s=!0)),n===t.promise?u(k("Promise-chain cycle")):(i=D(n))?i.call(n,c,u):c(n)):u(r)}catch(e){l&&!s&&l.exit(),u(e)}};n.length>i;)s(n[i++]);e._c=[],e._n=!1,t&&!e._h&&A(e)}))}},A=function(e){y.call(c,(function(){var t,n,r,o=e._v,i=L(e);if(i&&(t=_((function(){P?S.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=P||L(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},L=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){y.call(c,(function(){var t;P?S.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},I=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},G=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=D(e))?v((function(){var r={_w:n,_d:!1};try{t.call(e,u(G,r,1),u(I,r,1))}catch(e){I.call(r,e)}})):(n._v=e,n._s=1,M(n,!1))}catch(e){I.call({_w:n,_d:!1},e)}}};j||(E=function(e){m(this,E,"Promise","_h"),p(e),r.call(this);try{e(u(G,this,1),u(I,this,1))}catch(e){I.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(1577)(E.prototype,{then:function(e,t){var n=R(g(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=u(G,e,1),this.reject=u(I,e,1)},b.f=R=function(e){return e===E||e===s?new i(e):o(e)}),f(f.G+f.W+f.F*!j,{Promise:E}),n(192)(E,"Promise"),n(1578)("Promise"),s=n(119).Promise,f(f.S+f.F*!j,"Promise",{reject:function(e){var t=R(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(a||!j),"Promise",{resolve:function(e){return x(a&&this===s?E:this,e)}}),f(f.S+f.F*!(j&&n(616)((function(e){E.all(e).catch(T)}))),"Promise",{all:function(e){var t=this,n=R(t),r=n.resolve,o=n.reject,i=_((function(){var n=[],i=0,s=1;d(e,!1,(function(e){var a=i++,c=!1;n.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,n[a]=e,--s||r(n))}),o)})),--s||r(n)}));return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=R(t),r=n.reject,o=_((function(){d(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},618:function(e,t,n){var r,o,i,s=n(100),a=n(608),c=n(601),u=n(303),l=n(32),f=l.process,h=l.setImmediate,p=l.clearImmediate,m=l.MessageChannel,d=l.Dispatch,g=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){v.call(e.data)};h&&p||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++g]=function(){a("function"==typeof e?e:Function(e),t)},r(g),g},p=function(e){delete y[e]},"process"==n(145)(f)?r=function(e){f.nextTick(s(v,e,1))}:d&&d.now?r=function(e){d.now(s(v,e,1))}:m?(i=(o=new m).port2,o.port1.onmessage=b,r=s(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),e.exports={set:h,clear:p}},619:function(e,t,n){"use strict";var r=n(120);function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},620:function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(e,t,n,r){var o=t&&t.prototype instanceof l?t:l,i=Object.create(o.prototype),s=new x(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return S()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=b(s,n);if(a){if(a===u)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,s),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=a;var u={};function l(){}function f(){}function h(){}var p={};p[o]=function(){return this};var m=Object.getPrototypeOf,d=m&&m(m(k([])));d&&d!==t&&n.call(d,o)&&(p=d);var g=h.prototype=l.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function v(e,t){var r;this._invoke=function(o,i){function s(){return new t((function(r,s){!function r(o,i,s,a){var u=c(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,a)}),(function(e){r("throw",e,s,a)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,a)}))}a(u.arg)}(o,i,r,s)}))}return r=r?r.then(s,s):s()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=g.constructor=h,h.constructor=f,h[s]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(v.prototype),v.prototype[i]=function(){return this},e.AsyncIterator=v,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var s=new v(a(t,n,r,o),i);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(g),g[s]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},621:function(e,t,n){e.exports=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,(function(e){return o(t[s][1][e]||e)}),u,u.exports,e,t,n,r)}return n[s].exports}for(var i=!1,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";var r=Phaser.Math.Clamp,o=Phaser.Math.Snap.Floor,i=window,s=new Phaser.Geom.Rectangle,a=new Phaser.Class({Extends:Phaser.Plugins.BasePlugin,debounce:!1,debounceDelay:50,debounceTimer:null,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mode:"fit",resizeCameras:!0,scale:null,snap:null,init:function(e){this.onResize=this.onResize.bind(this),this.setPendingRefresh=this.setPendingRefresh.bind(this),this.game.canvas.style.transformOrigin="0 0",e&&this.configure(e)},start:function(){this.game.events.on("prestep",this.gamePreStep,this),i.addEventListener("resize",this.onResize),this.setPendingRefresh()},stop:function(){this.game.events.off("prestep",this.gamePreStep,this),i.removeEventListener("resize",this.onResize)},gamePreStep:function(e,t){this.debounce&&this.debounceTimer>0&&(this.debounceTimer-=t,this.debounceTimer<=0&&this.setPendingRefresh()),this.needsRefresh&&this.refresh()},refresh:function(){var e=this.mode,t=this.game.config,n=this.getBounds(),r=this.calcAvailWidth(n.width,!0),o=this.calcAvailHeight(n.height,!0);"resize"!==e&&"resize-and-fit"!==e||r===t.width&&o===t.height||this.resizeGame(r,o),"resize-and-fit"===e&&(r=this.calcAvailWidth(n.width,!1),o=this.calcAvailHeight(n.height,!1)),"fit"===e||"resize-and-fit"===e?this.scaleCanvas(Math.min(r/t.width,o/t.height)):this.scaleCanvas(1),this.needsRefresh=!1},getBounds:function(){return this.game.config.parent?this.game.canvas.parentNode.getBoundingClientRect():s.setSize(i.innerWidth,i.innerHeight)},calcAvailWidth:function(e,t){return t&&(e=r(e,this.minWidth,this.maxWidth)),this.snap&&(e=o(e,this.snap)),e},calcAvailHeight:function(e,t){return t&&(e=r(e,this.minHeight,this.maxHeight)),this.snap&&(e=o(e,this.snap)),e},resizeGame:function(e,t){this.game.resize(e,t),this.resizeCameras&&this._resizeCameras(e,t)},_resizeCameras:function(e,t){this.game.scene.scenes.forEach((function(n){n.cameras.resize(e,t)}))},scaleCanvas:function(e){e!==this.scale&&(this.game.canvas.style.transform="scale("+e+")",this.scale=e)},onResize:function(){this.setPendingRefresh(),this.debounce&&(this.needsRefresh=!1,this.debounceTimer=this.debounceDelay)},setMode:function(e){this.mode=e,this.setPendingRefresh()},setPendingRefresh:function(){this.needsRefresh=!0},configure:function(e){Object.assign(this,e),this.setPendingRefresh()},toJSON:function(){return{debounce:this.debounce,debounceDelay:this.debounceDelay,maxHeight:this.maxHeight,maxWidth:this.maxWidth,minHeight:this.minHeight,minWidth:this.minWidth,mode:this.mode,resizeCameras:this.resizeCameras,snap:this.snap}}});a.FIT="fit",a.NONE="none",a.RESIZE="resize",a.RESIZE_AND_FIT="resize-and-fit",Object.seal(a.prototype),Phaser.Plugins.GameScalePlugin=a,t.exports=a},{}]},{},[1])(1)},80:function(e,t,n){var r=n(50),o=n(143);e.exports=n(44)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},81:function(e,t,n){var r=n(32),o=n(80),i=n(99),s=n(142)("src"),a=n(1543),c=(""+a).split("toString");n(119).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var u="function"==typeof n;u&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(u&&(i(n,s)||o(n,s,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:a?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||a.call(this)}))},82:function(e,t,n){n(602)("asyncIterator")},83:function(e,t,n){"use strict";var r=n(32),o=n(99),i=n(44),s=n(51),a=n(81),c=n(1551).KEY,u=n(97),l=n(190),f=n(192),h=n(142),p=n(27),m=n(603),d=n(602),g=n(1552),y=n(605),v=n(33),b=n(43),_=n(193),w=n(98),x=n(304),k=n(143),S=n(305),C=n(1553),O=n(607),E=n(604),P=n(50),T=n(147),R=O.f,j=P.f,D=C.f,M=r.Symbol,A=r.JSON,L=A&&A.stringify,N=p("_hidden"),I=p("toPrimitive"),G={}.propertyIsEnumerable,B=l("symbol-registry"),F=l("symbols"),W=l("op-symbols"),U=Object.prototype,H="function"==typeof M&&!!E.f,z=r.QObject,J=!z||!z.prototype||!z.prototype.findChild,V=i&&u((function(){return 7!=S(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=R(U,t);r&&delete U[t],j(e,t,n),r&&e!==U&&j(U,t,r)}:j,X=function(e){var t=F[e]=S(M.prototype);return t._k=e,t},q=H&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},Y=function(e,t,n){return e===U&&Y(W,t,n),v(e),t=x(t,!0),v(n),o(F,t)?(n.enumerable?(o(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:k(0,!1)})):(o(e,N)||j(e,N,k(1,{})),e[N][t]=!0),V(e,t,n)):j(e,t,n)},K=function(e,t){v(e);for(var n,r=g(t=w(t)),o=0,i=r.length;i>o;)Y(e,n=r[o++],t[n]);return e},$=function(e){var t=G.call(this,e=x(e,!0));return!(this===U&&o(F,e)&&!o(W,e))&&(!(t||!o(this,e)||!o(F,e)||o(this,N)&&this[N][e])||t)},Q=function(e,t){if(e=w(e),t=x(t,!0),e!==U||!o(F,t)||o(W,t)){var n=R(e,t);return!n||!o(F,t)||o(e,N)&&e[N][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=D(w(e)),r=[],i=0;n.length>i;)o(F,t=n[i++])||t==N||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===U,r=D(n?W:w(e)),i=[],s=0;r.length>s;)!o(F,t=r[s++])||n&&!o(U,t)||i.push(F[t]);return i};H||(a((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(W,n),o(this,N)&&o(this[N],e)&&(this[N][e]=!1),V(this,e,k(1,n))};return i&&J&&V(U,e,{configurable:!0,set:t}),X(e)}).prototype,"toString",(function(){return this._k})),O.f=Q,P.f=Y,n(606).f=C.f=Z,n(195).f=$,E.f=ee,i&&!n(141)&&a(U,"propertyIsEnumerable",$,!0),m.f=function(e){return X(p(e))}),s(s.G+s.W+s.F*!H,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=T(p.store),oe=0;re.length>oe;)d(re[oe++]);s(s.S+s.F*!H,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=M(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){J=!0},useSimple:function(){J=!1}}),s(s.S+s.F*!H,"Object",{create:function(e,t){return void 0===t?S(e):K(S(e),t)},defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ie=u((function(){E.f(1)}));s(s.S+s.F*ie,"Object",{getOwnPropertySymbols:function(e){return E.f(_(e))}}),A&&s(s.S+s.F*(!H||u((function(){var e=M();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(b(t)||void 0!==e)&&!q(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!q(t))return t}),r[1]=t,L.apply(A,r)}}),M.prototype[I]||n(80)(M.prototype,I,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},84:function(e,t,n){"use strict";n(308);var r=n(33),o=n(309),i=n(44),s=/./.toString,a=function(e){n(81)(RegExp.prototype,"toString",e,!0)};n(97)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?a((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=s.name&&a((function(){return s.call(this)}))},85:function(e,t,n){var r=n(51),o=n(305),i=n(120),s=n(33),a=n(43),c=n(97),u=n(1554),l=(n(32).Reflect||{}).construct,f=c((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),h=!c((function(){l((function(){}))}));r(r.S+r.F*(f||h),"Reflect",{construct:function(e,t){i(e),s(t);var n=arguments.length<3?e:i(arguments[2]);if(h&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,p=o(a(c)?c:Object.prototype),m=Function.apply.call(e,p,t);return a(m)?m:p}})},86:function(e,t,n){var r=n(51);r(r.S,"Object",{setPrototypeOf:n(1555).set})},97:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},98:function(e,t,n){var r=n(598),o=n(146);e.exports=function(e){return r(o(e))}},99:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}}});
//# sourceMappingURL=app-b4a8ba875b10b281da6f.bundle.js.map